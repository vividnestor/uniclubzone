"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const t=require("vue"),O=require("@floating-ui/dom");var I=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},G="Expected a function",H=0/0,se="[object Symbol]",de=/^\s+|\s+$/g,me=/^[-+]0x[0-9a-f]+$/i,ge=/^0b[01]+$/i,ye=/^0o[0-7]+$/i,ve=parseInt,he=typeof I=="object"&&I&&I.Object===Object&&I,be=typeof self=="object"&&self&&self.Object===Object&&self,we=he||be||Function("return this")(),Fe=Object.prototype,je=Fe.toString,Oe=Math.max,Se=Math.min,z=function(){return we.Date.now()};function xe(e,n,r){var i,f,c,s,o,d,m=0,b=!1,u=!1,w=!0;if(typeof e!="function")throw new TypeError(G);n=q(n)||0,M(r)&&(b=!!r.leading,u="maxWait"in r,c=u?Oe(q(r.maxWait)||0,n):c,w="trailing"in r?!!r.trailing:w);function x(a){var g=i,y=f;return i=f=void 0,m=a,s=e.apply(y,g),s}function P(a){return m=a,o=setTimeout(F,n),b?x(a):s}function B(a){var g=a-d,y=a-m,j=n-g;return u?Se(j,c-y):j}function T(a){var g=a-d,y=a-m;return d===void 0||g>=n||g<0||u&&y>=c}function F(){var a=z();if(T(a))return p(a);o=setTimeout(F,B(a))}function p(a){return o=void 0,w&&i?x(a):(i=f=void 0,s)}function U(){o!==void 0&&clearTimeout(o),m=0,i=d=f=o=void 0}function A(){return o===void 0?s:p(z())}function v(){var a=z(),g=T(a);if(i=arguments,f=this,d=a,g){if(o===void 0)return P(d);if(u)return o=setTimeout(F,n),x(d)}return o===void 0&&(o=setTimeout(F,n)),s}return v.cancel=U,v.flush=A,v}function Te(e,n,r){var i=!0,f=!0;if(typeof e!="function")throw new TypeError(G);return M(r)&&(i="leading"in r?!!r.leading:i,f="trailing"in r?!!r.trailing:f),xe(e,n,{leading:i,maxWait:n,trailing:f})}function M(e){var n=typeof e;return!!e&&(n=="object"||n=="function")}function Ae(e){return!!e&&typeof e=="object"}function Ce(e){return typeof e=="symbol"||Ae(e)&&je.call(e)==se}function q(e){if(typeof e=="number")return e;if(Ce(e))return H;if(M(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=M(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=e.replace(de,"");var r=ge.test(e);return r||ye.test(e)?ve(e.slice(2),r?2:8):me.test(e)?H:+e}var Ee=Te;function S(e){var r;if(e==null||e.value==null)return null;const n=(r=e.value.$el)!=null?r:e.value;return n.$el?S(t.ref(n)):n}function X(e={}){const n=t.ref(null),r=t.ref(null),i=t.ref(void 0),f=t.ref(void 0),c=t.ref(t.unref(e.placement||"bottom")),s=t.ref(t.unref(e.strategy||"absolute")),o=t.shallowRef({});return{x:i,y:f,placement:c,strategy:s,middlewareData:o,update:()=>{const m=S(n),b=S(r);!m||!b||O.computePosition(m,b,{placement:t.unref(e.placement),strategy:t.unref(e.strategy),middleware:t.unref(e.middleware)}).then(u=>{i.value=u.x,f.value=u.y,c.value=u.placement,s.value=u.strategy,o.value=u.middlewareData})},reference:n,floating:r}}const Y=e=>{const{padding:n}=e;return{name:"arrow",options:e,fn(r){const i=t.unref(e.element);return i?O.arrow({element:i,padding:n}).fn(r):{}}}};function J(e){return e.reduce((n,r)=>r.type===t.Fragment?n.concat(J(r.children)):n.concat(r),[])}function k(e){return e==null?!1:typeof e.type=="string"||typeof e.type=="object"||typeof e.type=="function"}function N(e){return e=t.unref(e),e&&(e==null?void 0:e.nodeType)!==Node.COMMENT_NODE}const Ne=["origin-bottom","origin-top","origin-right","origin-left","origin-bottom-left","origin-bottom-right","origin-top-left","origin-top-right"],K=e=>{switch(e){case"top":return"origin-bottom";case"bottom":return"origin-top";case"left":return"origin-right";case"right":return"origin-left";case"top-start":case"right-end":return"origin-bottom-left";case"top-end":case"left-end":return"origin-bottom-right";case"right-start":case"bottom-start":return"origin-top-left";case"left-start":case"bottom-end":return"origin-top-right";default:return""}},Q=Symbol("ArrowState");function Z(e){const n=t.inject(Q,null);if(n===null){const r=new Error(`<${e} /> must be in the <Float /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Z),r}return n}const ee={as:{type:[String,Function,Object],default:"template"},floatingAs:{type:[String,Function,Object],default:"div"},show:{type:Boolean,default:null},placement:{type:String,default:"bottom-start"},strategy:{type:String,default:"absolute"},offset:[Number,Function,Object],shift:{type:[Boolean,Number,Object],default:!1},flip:{type:[Boolean,Number,Object],default:!1},arrow:{type:[Boolean,Number],default:!1},autoPlacement:{type:[Boolean,Object],default:!1},hide:{type:[Boolean,Object],default:!1},autoUpdate:{type:[Boolean,Object],default:!0},zIndex:{type:[Number,String],default:9999},transitionName:String,transitionType:String,enter:String,enterFrom:String,enterTo:String,leave:String,leaveFrom:String,leaveTo:String,originClass:[String,Function],tailwindcssOriginClass:{type:Boolean,default:!1},portal:{type:[Boolean,String],default:!1},transform:{type:Boolean,default:!0},adaptiveWidth:{type:Boolean,default:!1},middleware:{type:[Array,Function],default:()=>[]}},te=t.defineComponent({name:"Float",props:ee,emits:["show","hide","update"],setup(e,{emit:n,slots:r,attrs:i}){const f=t.ref(!1),c=t.ref(e.show!==null?e.show:!1),s=t.toRef(e,"placement"),o=t.toRef(e,"strategy"),d=t.shallowRef(void 0),m=t.ref(null),b=t.ref(null),u=t.ref(null),{x:w,y:x,placement:P,strategy:B,reference:T,floating:F,middlewareData:p,update:U}=X({placement:s,strategy:o,middleware:d}),A=t.computed(()=>typeof e.originClass=="function"?e.originClass(P.value):typeof e.originClass=="string"?e.originClass:e.tailwindcssOriginClass?K(P.value):""),v=t.ref(S(T)),a=t.ref(S(F)),g=t.ref(null);function y(){v.value=S(T),a.value=S(F)}function j(){N(v)&&N(a)&&(U(),n("update"))}t.watch(s,()=>{y(),j()}),t.watch(o,()=>{y(),j()}),t.watch([()=>e.offset,()=>e.flip,()=>e.shift,()=>e.autoPlacement,()=>e.arrow,()=>e.hide,()=>e.middleware],()=>{y();const l=[];(typeof e.offset=="number"||typeof e.offset=="object"||typeof e.offset=="function")&&l.push(O.offset(e.offset)),(e.flip===!0||typeof e.flip=="number"||typeof e.flip=="object")&&l.push(O.flip({padding:typeof e.flip=="number"?e.flip:void 0,...typeof e.flip=="object"?e.flip:{}})),(e.shift===!0||typeof e.shift=="number"||typeof e.shift=="object")&&l.push(O.shift({padding:typeof e.shift=="number"?e.shift:void 0,...typeof e.shift=="object"?e.shift:{}})),(e.autoPlacement===!0||typeof e.autoPlacement=="object")&&l.push(O.autoPlacement(typeof e.autoPlacement=="object"?e.autoPlacement:void 0)),(e.arrow===!0||typeof e.arrow=="number")&&l.push(Y({element:m,padding:e.arrow===!0?0:e.arrow})),l.push(...typeof e.middleware=="function"?e.middleware({referenceEl:v,floatingEl:a}):e.middleware),(e.hide===!0||typeof e.hide=="object")&&l.push(O.hide(typeof e.hide=="object"?e.hide:void 0)),d.value=l,j()},{immediate:!0}),t.watch(p,()=>{var C,E;const l=p.value.arrow;b.value=(C=l==null?void 0:l.x)!=null?C:null,u.value=(E=l==null?void 0:l.y)!=null?E:null});let $;function re(){N(v)&&N(a)&&e.autoUpdate!==!1&&($=O.autoUpdate(v.value,a.value,Ee(j,16),typeof e.autoUpdate=="object"?e.autoUpdate:void 0))}function ae(){$&&($(),$=void 0)}let R;function ie(){y(),e.adaptiveWidth&&typeof window<"u"&&"ResizeObserver"in window&&v.value&&(R=new ResizeObserver(([l])=>{g.value=l.borderBoxSize.reduce((C,{inlineSize:E})=>C+E,0)}),R.observe(v.value))}function oe(){R&&(R.disconnect(),R=void 0,g.value=null)}async function V(){await t.nextTick(),y(),N(v)&&N(a)&&c.value===!0?(re(),n("show")):c.value===!1&&$&&(ae(),n("hide"))}t.watch(c,V),t.onMounted(async()=>{f.value=!0,ie(),await V()}),t.onBeforeUnmount(()=>{oe()});const le={ref:m,placement:P,x:b,y:u};return t.provide(Q,le),()=>{if(r.default){let l=function(h){return e.as==="template"?h:typeof e.as=="string"?t.h(e.as,i,h):t.h(e.as,()=>h)},C=function(h){return f.value&&(e.portal===!0||typeof e.portal=="string")?t.h(t.Teleport,{to:e.portal===!0?"body":e.portal},[h]):h},E=function(h){return e.floatingAs==="template"?h:typeof e.floatingAs=="string"?t.h(e.floatingAs,L,h):t.h(e.floatingAs,()=>h)};const[_,fe]=J(r.default()||[]).filter(k);if(!k(_))return;const ue={enterActiveClass:e.enter||A.value?`${e.enter||""} ${A.value}`:void 0,enterFromClass:e.enterFrom,enterToClass:e.enterTo,leaveActiveClass:e.leave||A.value?`${e.leave||""} ${A.value}`:void 0,leaveFromClass:e.leaveFrom,leaveToClass:e.leaveTo},ce={name:e.transitionName,type:e.transitionType,...e.transitionName?{}:ue,onBeforeEnter(){y(),c.value=!0},onAfterLeave(){c.value=!1}},L={ref:F,style:{...e.transform?{position:B.value,zIndex:e.zIndex,top:"0",left:"0",right:"auto",bottom:"auto",transform:`translate(${Math.round(w.value||0)}px,${Math.round(x.value||0)}px)`}:{position:B.value,zIndex:e.zIndex,top:`${x.value||0}px`,left:`${w.value||0}px`},width:e.adaptiveWidth&&typeof g.value=="number"?`${g.value}px`:""}};return l([t.cloneVNode(_,{ref:T}),C(E(t.h(t.Transition,ce,()=>{var D;const h=e.floatingAs==="template"?L:null,W=t.cloneVNode(fe,h);return((D=W.props)==null?void 0:D.unmount)===!1?(y(),j(),W):typeof e.show!="boolean"||e.show?W:t.createCommentVNode()})))])}}}}),ne={as:{type:[String,Object],default:"div"},offset:{type:Number,default:4}},Pe=t.defineComponent({name:"FloatArrow",props:ne,setup(e,{slots:n,attrs:r}){const{ref:i,placement:f,x:c,y:s}=Z("FloatArrow");return()=>{var m;const o={top:"bottom",right:"left",bottom:"top",left:"right"}[f.value.split("-")[0]],d={left:typeof c.value=="number"?`${c.value}px`:"",top:typeof s.value=="number"?`${s.value}px`:"",right:"",bottom:"",[o]:`${e.offset*-1}px`};if(e.as==="template"){const b={placement:f.value},u=(m=n.default)==null?void 0:m.call(n,b),[w]=Array.isArray(u)?u:[u];if(!w||!k(w))throw new Error("When the prop `as` of <FloatArrow /> is 'template', there must be contains 1 child element.");return t.cloneVNode(w,{ref:i,style:d})}return t.h(e.as,Object.assign({},r,{ref:i,style:d}))}}});function pe(e){return(n,{slots:r})=>t.h(te,t.mergeProps(e,n),r)}const $e=["Float","FloatArrow"];function Re(e={}){const{prefix:n=""}=e;return{type:"component",resolve:r=>{if(r.startsWith(n)){const i=r.substring(n.length);if($e.includes(i))return{name:i,from:"@headlessui-float/vue"}}}}}exports.Float=te;exports.FloatArrow=Pe;exports.FloatArrowProps=ne;exports.FloatProps=ee;exports.HeadlessUiFloatResolver=Re;exports.arrow=Y;exports.createHighOrderFloatComponent=pe;exports.tailwindcssOriginClassResolver=K;exports.tailwindcssOriginSafelist=Ne;exports.useFloating=X;
