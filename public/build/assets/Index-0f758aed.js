import{d as N,c as D,aM as v,an as V,o as f,a as k,D as t,w as a,f as e,a0 as E,G as r,t as o,a4 as p,g as w,e as $,s as F,b6 as M,h as S,n as T,a5 as H,F as j,v as h,aN as I,E as P,aO as U,b as z,aP as L,R}from"./vendor-fc9552fb.js";import{l as G,a as d,h as g,j as _,r as K,g as q,i as b,L as m}from"./index-3d1a2934.js";import{_ as J}from"./PageHeader.vue_vue_type_script_setup_true_lang-8b2a5c80.js";import{_ as Q}from"./PageContent.vue_vue_type_script_setup_true_lang-f12642fa.js";import{_ as B}from"./DatePicker.vue_vue_type_script_setup_true_lang-7f324884.js";import{_ as Y}from"./Tooltip.vue_vue_type_script_setup_true_lang-a9bdb4ff.js";import{c as W}from"./customParseFormat-b0e48cfd.js";const X={class:"flex gap-1"},Z={key:0},O=N({__name:"Publish",props:{publishedAt:{},updateUrl:{},columnName:{},mode:{default:"dateTime"},size:{default:"sm"},tooltipPosition:{default:"top"}},setup(A){const{action:n}=G(),C=A,c=D(()=>C.publishedAt),s=D(()=>u.published_at?v(u.published_at).isAfter(v()):!1),u=V({published_at:C.publishedAt??v().format("YYYY-MM-DD HH:mm")});return(l,y)=>(f(),k("div",X,[c.value?w("",!0):(f(),k("div",Z,[t(e(g),{type:"info"},{trigger:a(({setIsOpen:i})=>[t(e(d),{onClick:()=>i(!0),color:"gray",variant:"outline",leftIcon:e(E),size:l.size},{default:a(()=>[r(o(l.$t("craftable-pro","Publish")),1)]),_:2},1032,["onClick","leftIcon","size"])]),title:a(()=>[r(o(l.$t("craftable-pro","Publish")),1)]),content:a(()=>[t(e(B),{name:"published_at",modelValue:e(u).published_at,"onUpdate:modelValue":y[0]||(y[0]=i=>e(u).published_at=i),mode:l.mode,label:l.$t("craftable-pro","Set publish date and time")},null,8,["modelValue","mode","label"])]),buttons:a(({setIsOpen:i})=>[t(e(d),{onClick:p(()=>{e(n)("patch",l.updateUrl,{[l.columnName]:e(u).published_at},{onFinish:()=>{i(!1)}})},["prevent"]),color:"primary"},{default:a(()=>[r(o(s.value?l.$t("craftable-pro","Schedule publishing"):l.$t("craftable-pro","Publish")),1)]),_:2},1032,["onClick"]),t(e(d),{onClick:p(()=>i(),["prevent"]),color:"gray",variant:"outline"},{default:a(()=>[r(o(l.$t("craftable-pro","Cancel")),1)]),_:2},1032,["onClick"])]),_:1})])),c.value?(f(),$(e(K),{key:1},{default:a(()=>[t(e(g),{type:"warning"},{trigger:a(({setIsOpen:i})=>[t(e(Y),{position:l.tooltipPosition},{button:a(()=>[t(e(d),{onClick:()=>i(!0),color:"gray",variant:"outline",size:l.size,class:"rounded-r-none"},{default:a(()=>[(f(),$(F(s.value?e(M):e(S)),{class:T(["-ml-1 mr-2 h-4 w-4 flex-shrink-0 stroke-2",s.value?"":"text-green-500"]),"aria-hidden":"true"},null,8,["class"])),r(" "+o(l.mode==="dateTime"?e(v)(l.publishedAt).format("DD.MM.YYYY HH:mm"):e(v)(l.publishedAt).format("DD.MM.YYYY")),1)]),_:2},1032,["onClick","size"])]),content:a(()=>[r(o(s.value?l.$t("craftable-pro","Reschedule"):l.$t("craftable-pro","Change published at")),1)]),_:2},1032,["position"])]),title:a(()=>[r(o(l.$t("craftable-pro","Edit publish date")),1)]),content:a(()=>[t(e(B),{name:"published_at",modelValue:e(u).published_at,"onUpdate:modelValue":y[1]||(y[1]=i=>e(u).published_at=i),mode:l.mode,label:l.$t("craftable-pro","Set publish date and time")},null,8,["modelValue","mode","label"])]),buttons:a(({setIsOpen:i})=>[t(e(d),{onClick:p(()=>{e(n)("patch",l.updateUrl,{[l.columnName]:e(u).published_at},{onFinish:()=>{i(!1)}})},["prevent"]),color:"primary"},{default:a(()=>[r(o(s.value?l.$t("craftable-pro","Schedule publishing"):l.$t("craftable-pro","Publish")),1)]),_:2},1032,["onClick"]),t(e(d),{onClick:p(()=>i(),["prevent"]),color:"gray",variant:"outline"},{default:a(()=>[r(o(l.$t("craftable-pro","Cancel")),1)]),_:2},1032,["onClick"])]),_:1}),t(e(g),{type:"danger"},{trigger:a(({setIsOpen:i})=>[t(e(Y),{position:l.tooltipPosition},{button:a(()=>[t(e(_),{onClick:()=>i(!0),icon:e(H),color:"gray",variant:"outline",class:"!bg-gray-50 hover:!bg-gray-100 -ml-px rounded-l-none stroke-2",size:l.size},null,8,["onClick","icon","size"])]),content:a(()=>[r(o(s.value?l.$t("craftable-pro","Cancel schedulement"):l.$t("craftable-pro","Unpublish")),1)]),_:2},1032,["position"])]),title:a(()=>[r(o(l.$t("craftable-pro","Unpublish")),1)]),content:a(()=>[r(o(l.$t("craftable-pro","Are you sure you want to unpublish?")),1)]),buttons:a(({setIsOpen:i})=>[t(e(d),{onClick:p(()=>{e(n)("patch",l.updateUrl,{[l.columnName]:null},{onFinish:()=>{i(!1)}})},["prevent"]),color:"danger"},{default:a(()=>[r(o(l.$t("craftable-pro","Unpublish")),1)]),_:2},1032,["onClick"]),t(e(d),{onClick:p(()=>i(),["prevent"]),color:"gray",variant:"outline"},{default:a(()=>[r(o(l.$t("craftable-pro","Cancel")),1)]),_:2},1032,["onClick"])]),_:1})]),_:1})):w("",!0)]))}}),x={class:"sr-only"},ee={class:"flex items-center justify-end gap-3"},ie=N({__name:"Index",props:{events:{}},setup(A){return v.extend(W),(n,C)=>{const c=j("can");return f(),k(R,null,[t(e(J),{title:n.$t("Events of Club")},{default:a(()=>[h((f(),$(e(d),{style:{"background-color":"darkorange","border-radius":"20px"},leftIcon:e(I),as:e(P),href:n.route("craftable-pro.events.create")},{default:a(()=>[r(o(n.$t("craftable-pro","New Event")),1)]),_:1},8,["leftIcon","as","href"])),[[c,"craftable-pro.event.create"]])]),_:1},8,["title"]),t(e(Q),null,{default:a(()=>[t(e(q),{baseUrl:n.route("craftable-pro.events.index"),data:n.events,dataKey:"events",withBulkSelect:!1},{bulkActions:a(({bulkAction:s})=>[t(e(g),{type:"danger"},{trigger:a(({setIsOpen:u})=>[h((f(),$(e(d),{onClick:()=>u(!0),color:"gray",variant:"outline",size:"sm",leftIcon:e(U)},{default:a(()=>[r(o(n.$t("craftable-pro","Delete")),1)]),_:2},1032,["onClick","leftIcon"])),[[c,"craftable-pro.event.destroy"]])]),title:a(()=>[r(o(n.$t("craftable-pro","Delete Event")),1)]),content:a(()=>[r(o(n.$t("craftable-pro","Are you sure you want to delete selected Event? All data will be permanently removed from our servers forever. This action cannot be undone.")),1)]),buttons:a(({setIsOpen:u})=>[h((f(),$(e(d),{onClick:p(()=>{s("post",n.route("craftable-pro.events.bulk-destroy"),{onFinish:()=>u(!1)})},["prevent"]),color:"danger"},{default:a(()=>[r(o(n.$t("craftable-pro","Delete")),1)]),_:2},1032,["onClick"])),[[c,"craftable-pro.event.destroy"]]),t(e(d),{onClick:p(()=>u(),["prevent"]),color:"gray",variant:"outline"},{default:a(()=>[r(o(n.$t("craftable-pro","Cancel")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),tableHead:a(()=>[t(e(b),{sortBy:"id"},{default:a(()=>[r(o(n.$t("craftable-pro","Id")),1)]),_:1}),t(e(b),{sortBy:"title"},{default:a(()=>[r(o(n.$t("craftable-pro","Title")),1)]),_:1}),t(e(b),{sortBy:"content"},{default:a(()=>[r(o(n.$t("craftable-pro","Content")),1)]),_:1}),t(e(b),{sortBy:"slug"},{default:a(()=>[r(o(n.$t("craftable-pro","Slug")),1)]),_:1}),t(e(b),{sortBy:"published_at"},{default:a(()=>[r(o(n.$t("craftable-pro","Published At")),1)]),_:1}),t(e(b),{sortBy:"club_id"},{default:a(()=>[r(o(n.$t("craftable-pro","Club")),1)]),_:1}),t(e(b),{sortBy:"category_id"},{default:a(()=>[r(o(n.$t("craftable-pro","Category")),1)]),_:1}),t(e(b),null,{default:a(()=>[z("span",x,o(n.$t("craftable-pro","Actions")),1)]),_:1})]),tableRow:a(({item:s,action:u})=>[t(e(m),null,{default:a(()=>[r(o(s.id),1)]),_:2},1024),t(e(m),null,{default:a(()=>[r(o(s.title),1)]),_:2},1024),t(e(m),null,{default:a(()=>[r(o(s.content),1)]),_:2},1024),t(e(m),null,{default:a(()=>[r(o(s.slug),1)]),_:2},1024),t(e(m),null,{default:a(()=>[t(e(O),{publishedAt:s.published_at,updateUrl:n.route("craftable-pro.events.update",s.id),columnName:"published_at",mode:"dateTime"},null,8,["publishedAt","updateUrl"])]),_:2},1024),t(e(m),null,{default:a(()=>[r(o(s.club.name),1)]),_:2},1024),t(e(m),null,{default:a(()=>[r(o(s.category.name),1)]),_:2},1024),t(e(m),null,{default:a(()=>[z("div",ee,[h(t(e(_),{as:e(P),href:n.route("craftable-pro.events.edit",s),variant:"ghost",color:"gray",icon:e(L)},null,8,["as","href","icon"]),[[c,"craftable-pro.event.edit"]]),t(e(g),{type:"danger"},{trigger:a(({setIsOpen:l})=>[h(t(e(_),{onClick:()=>l(!0),color:"gray",variant:"ghost",icon:e(U)},null,8,["onClick","icon"]),[[c,"craftable-pro.event.destroy"]])]),title:a(()=>[r(o(n.$t("craftable-pro","Delete Event")),1)]),content:a(()=>[r(o(n.$t("craftable-pro","Are you sure you want to delete selected Event? All data will be permanently removed from our servers forever. This action cannot be undone.")),1)]),buttons:a(({setIsOpen:l})=>[h((f(),$(e(d),{onClick:p(()=>{u("delete",n.route("craftable-pro.events.destroy",s),{onFinish:()=>l(!1)})},["prevent"]),color:"danger"},{default:a(()=>[r(o(n.$t("craftable-pro","Delete")),1)]),_:2},1032,["onClick"])),[[c,"craftable-pro.event.destroy"]]),t(e(d),{onClick:p(()=>l(),["prevent"]),color:"gray",variant:"outline"},{default:a(()=>[r(o(n.$t("craftable-pro","Cancel")),1)]),_:2},1032,["onClick"])]),_:2},1024)])]),_:2},1024)]),_:1},8,["baseUrl","data"])]),_:1})],64)}}});export{ie as default};
