import{d as _,F as L,v as I,o as u,e as f,w as p,D as m,f as o,c0 as O,j as F,aw as E,n as T,b as V,c1 as B,c2 as D,c3 as U,c4 as M,bJ as j,c5 as y,aO as A,c as S,N as z,a as c,P as C,R as b,t as P,aJ as G,G as J,aH as R,aI as k}from"./vendor-d45124f2.js";import{d as H,t as Q,f as X,a as Y}from"./index-1b5bb668.js";import{_ as q}from"./PageHeader.vue_vue_type_script_setup_true_lang-10c52b00.js";import{_ as K}from"./PageContent.vue_vue_type_script_setup_true_lang-cfff65eb.js";import{u as W}from"./useForm-1bf51685.js";import{_ as w}from"./_baseIteratee-3ccc71d1.js";const Z=_({__name:"Accordion",props:{defaultOpen:{type:Boolean,default:!1}},setup(t){return(e,n)=>{const a=L("auto-animate");return I((u(),f(o(U),{as:"div",defaultOpen:e.defaultOpen},{default:p(({open:r})=>[m(o(O),{class:"group flex w-full items-center justify-between px-4 py-3 text-left font-medium leading-8 text-gray-900 focus:outline-none focus-visible:ring focus-visible:ring-primary-500 focus-visible:ring-opacity-75"},{default:p(()=>[F(e.$slots,"title"),m(o(E),{class:T([{"rotate-180 transform":r},"h-5 w-5 text-gray-400 group-hover:text-gray-700"])},null,8,["class"])]),_:2},1024),I(V("div",null,[m(o(B),{class:"p-4 pt-1 text-gray-700",static:""},{default:p(()=>[F(e.$slots,"content")]),_:3})],512),[[D,r]])]),_:3},8,["defaultOpen"])),[[a]])}}});var ee=w,te=M,re=j;function ne(t){return function(e,n,a){var r=Object(e);if(!te(e)){var s=ee(n);e=re(e),n=function(v){return s(r[v],v,r)}}var d=t(e,n,a);return d>-1?r[s?e[d]:d]:void 0}}var ae=ne;function se(t,e,n,a){for(var r=t.length,s=n+(a?1:-1);a?s--:++s<r;)if(e(t[s],s,t))return s;return-1}var oe=se,ie=y,x=1/0,le=17976931348623157e292;function ue(t){if(!t)return t===0?t:0;if(t=ie(t),t===x||t===-x){var e=t<0?-1:1;return e*le}return t===t?t:0}var me=ue,pe=me;function de(t){var e=pe(t),n=e%1;return e===e?n?e-n:e:0}var fe=de,ce=oe,_e=w,ve=fe,ge=Math.max,be=Math.min;function $e(t,e,n){var a=t==null?0:t.length;if(!a)return-1;var r=a-1;return n!==void 0&&(r=ve(n),r=n<0?ge(a+r,0):be(r,a-1)),ce(t,_e(e),r,!0)}var Ve=$e,he=ae,Ie=Ve,Fe=he(Ie),xe=Fe;const Te=A(xe),Ce=_({__name:"Permission",props:{modelValue:{},parentPermission:{},defaultOpen:{type:Boolean}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,a=e,r=S({get:()=>n.modelValue,set:i=>{a("update:modelValue",i)}}),s=i=>n.parentPermission?n.parentPermission+"."+i:i,d=()=>n.parentPermission?"text-sm":"text-lg",v=i=>{if(i.search("craftable-pro.role")===0&&!confirm(Q("craftable-pro","Do you really want to revoke permission to manage permissions?"))){const $=Te(i.split("."));n.modelValue[$]=!n.modelValue[$],a("update:modelValue",n.modelValue)}};return(i,$)=>{const N=z("Permission",!0);return u(!0),c(b,null,C(r.value,(h,l)=>(u(),c(b,null,[typeof h!="boolean"?(u(),f(o(Z),{key:0,"default-open":i.defaultOpen},{title:p(()=>[V("span",{class:T(d())},P(i.$t("permissions",s(l))),3)]),content:p(()=>[m(N,{"default-open":!1,modelValue:r.value[l],"onUpdate:modelValue":g=>r.value[l]=g,"parent-permission":s(l)},null,8,["modelValue","onUpdate:modelValue","parent-permission"])]),_:2},1032,["default-open"])):(u(),f(o(H),{modelValue:r.value[l],"onUpdate:modelValue":g=>r.value[l]=g,key:s(l),name:s(l),label:i.$t("permissions",s(l)),value:l,checked:h,onChange:g=>v(s(l))},null,8,["modelValue","onUpdate:modelValue","name","label","value","checked","onChange"]))],64))),256)}}}),Pe={class:"divide-y divide-gray-200"},we=_({__name:"Form",props:{form:{},submit:{},role:{}},setup(t){return(e,n)=>(u(),c("form",null,[m(o(X),null,{default:p(()=>[V("div",Pe,[(u(!0),c(b,null,C(e.form.permissionsTree,(a,r)=>(u(),f(Ce,{modelValue:e.form.permissionsTree[r],"onUpdate:modelValue":s=>e.form.permissionsTree[r]=s,"parent-permission":r},null,8,["modelValue","onUpdate:modelValue","parent-permission"]))),256))])]),_:1})]))}}),Ne=_({__name:"Edit",props:{role:{},permissionsTree:{}},setup(t){const e=t,{form:n,submit:a}=W({permissionsTree:e.permissionsTree},route("craftable-pro.roles.update",[e.role.id]));return(r,s)=>(u(),c(b,null,[m(o(q),{sticky:"",title:`${r.$t("craftable-pro","Edit permissions for role")} ${r.role.name}`},{default:p(()=>[m(o(Y),{leftIcon:o(G),onClick:o(a),loading:o(n).processing},{default:p(()=>[J(P(r.$t("craftable-pro","Save")),1)]),_:1},8,["leftIcon","onClick","loading"])]),_:1},8,["title"]),m(o(K),null,{default:p(()=>[m(we,{form:o(n),role:r.role,submit:o(a)},null,8,["form","role","submit"])]),_:1})],64))}}),Me=_({__name:"Edit",props:{role:{},permissionsTree:{}},setup(t){const e=t;return(n,a)=>(u(),f(Ne,R(k(e)),null,16))}});export{Me as default};
