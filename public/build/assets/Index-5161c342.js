import{d as O,an as fe,o as n,e as b,w as s,j as ue,G as f,t as o,D as i,f as e,M as _e,ae as R,a as _,b as l,n as F,q as j,c as q,g as h,R as D,a$ as ve,bV as ge,am as ye,Q as V,F as se,v as Y,b2 as be,P,aM as re,bW as he,b1 as $e,a4 as ne,bX as we,bY as ke,bZ as ie,al as T,aJ as xe,aK as Ve}from"./vendor-fc9552fb.js";import{a as M,h as ce,z as Ce,_ as de,j as me,y as A,f as Ue,C as Ie,A as De,E as Fe,g as Me,i as H,L as S}from"./index-3d1a2934.js";import{_ as je}from"./PageHeader.vue_vue_type_script_setup_true_lang-8b2a5c80.js";import{_ as ze}from"./PageContent.vue_vue_type_script_setup_true_lang-f12642fa.js";import{_ as B}from"./Tag.vue_vue_type_script_setup_true_lang-e877305e.js";import{_ as Oe,a as E}from"./ImageEditor.vue_vue_type_script_setup_true_lang-7556934e.js";import{_ as K}from"./Tab.vue_vue_type_script_setup_true_lang-b9eb8a5b.js";import{_ as Ne}from"./FiltersDropdown.vue_vue_type_script_setup_true_lang-e49e8945.js";import{u as Le}from"./useListingFilters-c4c40895.js";import{u as Ye}from"./useFormLocale-91225c23.js";import"./pickBy-4f81202a.js";import"./_baseIteratee-14b2df24.js";const Be=O({__name:"ImageUploadModal",emits:["imageUploaded"],setup(U,{emit:g}){const I=g,v=fe({default:[]}),c=()=>{R.post("/admin/unassigned-media-upload",v.data()).then(a=>{I("imageUploaded",a.data.media),v.default=[]}).catch(a=>console.error(a))};return(a,p)=>(n(),b(e(ce),{class:"flex items-center justify-center"},{trigger:s(({setIsOpen:m})=>[ue(a.$slots,"button",{setIsOpen:m})]),title:s(()=>[f(o(a.$t("craftable-pro","Upload media")),1)]),content:s(()=>[i(e(Oe),{modelValue:e(v).default,"onUpdate:modelValue":p[0]||(p[0]=m=>e(v).default=m),centered:"",maxNumberOfFiles:1},{icon:s(()=>[i(e(_e),{class:"mb-2 h-10 w-10 stroke-1 text-gray-500"})]),_:1},8,["modelValue"])]),buttons:s(({setIsOpen:m})=>[i(e(M),{style:{"background-color":"darkorange","border-radius":"20px"},onClick:()=>{m(!1),c()}},{default:s(()=>[f(o(a.$t("craftable-pro","Submit")),1)]),_:2},1032,["onClick"])]),_:3}))}}),Pe={class:"pointer-events-auto w-screen max-w-xs pl-10 md:max-w-sm xl:relative xl:pl-0 2xl:max-w-md"},Te=O({__name:"Aside",props:{noPadding:{type:Boolean,default:!1}},setup(U){return(g,I)=>(n(),_("aside",Pe,[l("div",{class:F(["flex h-full flex-col overflow-y-auto border-l border-gray-200 bg-white",{"px-4 py-5 sm:p-6":!g.noPadding}])},[ue(g.$slots,"default")],2)]))}}),Ae={class:"flex items-center gap-x-2"},He={class:"text-gray-500"},Se={class:"ml-auto flex items-center whitespace-nowrap text-gray-900"},Ee={key:0},Ke=O({__name:"CustomPropertyInput",props:{modelValue:{},propertyName:{}},emits:["localeChanged","update:modelValue","saved"],setup(U,{emit:g}){const I=U,v=j(!1),{availableLocales:c,currentLocale:a}=Ye(),p=j(a),m=q({get:()=>I.modelValue,set:k=>{L("update:modelValue",k)}}),N=()=>{const k=c==null?void 0:c.findIndex(C=>C===p.value);p.value=c[k+1]??c[0]},w=()=>{v.value&&L("saved"),v.value=!v.value},L=g;return(k,C)=>(n(),_("div",{class:F(["flex w-full items-center justify-start gap-x-1 text-sm font-medium",{"py-1.5":!0}])},[l("dt",Ae,[typeof m.value=="object"&&m.value!==null?(n(),_("button",{key:0,onClick:N},[i(Ce,{locale:p.value,showLocale:!1,class:"w-4"},null,8,["locale"])])):h("",!0),l("span",He,o(k.$t("craftable-pro",k.propertyName)),1)]),l("dd",Se,[v.value?(n(),_(D,{key:1},[typeof m.value=="object"&&m.value!==null?(n(),b(e(de),{key:0,modelValue:m.value[p.value],"onUpdate:modelValue":C[0]||(C[0]=z=>m.value[p.value]=z),size:"sm","label-placement":"left",name:k.propertyName,class:"w-full"},null,8,["modelValue","name"])):(n(),b(e(de),{key:1,modelValue:m.value,"onUpdate:modelValue":C[1]||(C[1]=z=>m.value=z),size:"sm","label-placement":"left",name:k.propertyName,class:"w-full"},null,8,["modelValue","name"]))],64)):(n(),_("span",Ee,o(typeof m.value=="object"&&m.value!==null?m.value[p.value]:m.value),1)),i(e(me),{class:"ml-2",variant:"ghost",color:"gray",size:"sm",icon:v.value?e(ve):e(ge),onClick:w},null,8,["icon"])])]))}}),Re={class:"flex items-center gap-4 divide-x"},qe={class:"flex items-center gap-4 pl-4"},Ge={class:"relative flex gap-1 rounded-md bg-gray-100 p-0.5"},Je=l("div",{class:"h-full w-full rounded-md bg-white shadow-sm"},null,-1),Qe=[Je],We=["onClick"],Xe={class:"sr-only focus:outline-none"},Ze={class:"pointer-events-none mt-2 block truncate text-sm font-medium text-gray-900"},et={class:"pointer-events-none block text-sm font-medium text-gray-500"},tt={key:1,class:"overflow-x-auto"},at={class:"space-y-6 pb-16"},lt={key:0},ot={class:"mb-4 block w-full overflow-hidden rounded-lg"},st={class:"flex items-start justify-between"},rt={class:"overflow-auto"},nt={class:"truncate text-lg font-medium text-gray-900"},it={class:"sr-only"},dt={class:"text-sm font-medium text-gray-500"},ut={key:1},ct={class:"font-medium text-gray-900"},mt={class:"mt-2 divide-y divide-gray-200 border-t border-b border-gray-200"},pt={class:"py-3 text-sm font-medium"},ft={class:"text-gray-500"},_t={class:"whitespace-nowrap text-gray-900"},vt={class:"flex justify-between py-3 text-sm font-medium"},gt={class:"text-gray-500"},yt={class:"whitespace-nowrap text-gray-900"},bt={class:"flex justify-between py-3 text-sm font-medium"},ht={class:"text-gray-500"},$t={class:"whitespace-nowrap text-gray-900"},wt={class:"flex justify-between py-3 text-sm font-medium"},kt={class:"text-gray-500"},xt={class:"whitespace-nowrap text-gray-900"},Vt={class:"flex justify-between py-3 text-sm font-medium"},Ct={class:"text-gray-500"},Ut={class:"whitespace-nowrap text-gray-900"},It={class:"flex justify-between py-3 text-sm font-medium"},Dt={class:"text-gray-500"},Ft={class:"whitespace-nowrap text-gray-900"},Mt={key:2,class:"flex gap-4"},jt={class:"max-w-sm"},zt={class:"truncate text-gray-500"},Ot=O({__name:"Index",props:{data:{},filterOptions:{}},setup(U){var J,Q,W,X,Z,ee,te,ae;const g=t=>{const d=V().url.split("?")[0];return`${t}?`.indexOf(`${d}?`)!==-1},I=U,v=j(!0),c=j(!1),a=j(null),p=j("grid");ye(()=>a.value,()=>{v.value=!1,setTimeout(()=>{v.value=!0},200)});const m=q(()=>I.data),N=q(()=>g(route("craftable-pro.media.images"))?route("craftable-pro.media.images"):g(route("craftable-pro.media.files"))?route("craftable-pro.media.files"):route("craftable-pro.media.index")),{filtersForm:w,resetFilters:L,activeFiltersCount:k}=Le(N.value,{model_type:(J=V().props.filter)!=null&&J.model_type?[(Q=V().props.filter)==null?void 0:Q.model_type]:[],collection_name:(W=V().props.filter)!=null&&W.collection_name?[(X=V().props.filter)==null?void 0:X.collection_name]:[],mime_type:(Z=V().props.filter)!=null&&Z.mime_type?[(ee=V().props.filter)==null?void 0:ee.mime_type]:[],disk:(te=V().props.filter)!=null&&te.disk?[(ae=V().props.filter)==null?void 0:ae.disk]:[]}),C=t=>{t&&T.reload({only:["data"]})},z=t=>{R.delete("/admin/unassigned-media-destroy/"+t).then(d=>{a.value=null,T.reload({only:["data"]})}).catch(d=>console.error(d))},pe=()=>{R.post("/admin/media/update/"+a.value.id,{custom_properties:a.value.custom_properties}).then(t=>{T.reload({only:["data"]})}).catch(t=>console.error(t))},G=t=>{a.value===t&&c.value?(a.value=null,c.value=!1):(a.value=t,c.value=!0)};return(t,d)=>{const le=se("can"),oe=se("auto-animate");return n(),_(D,null,[i(e(je),{title:t.$t("craftable-pro","Media")},{default:s(()=>[i(e(Be),{onImageUploaded:C},{button:s(({setIsOpen:r})=>[Y((n(),b(e(M),{style:{"background-color":"darkorange","border-radius":"20px"},"left-icon":e(be),as:"button",onClick:()=>r(!0)},{default:s(()=>[f(o(t.$t("craftable-pro","Upload media")),1)]),_:2},1032,["left-icon","onClick"])),[[le,"craftable-pro.media.upload"]])]),_:1})]),_:1},8,["title"]),i(e(ze),null,{aside:s(()=>[a.value?(n(),b(e(Te),{key:0,class:"hidden xl:block"},{default:s(()=>{var r,x;return[Y((n(),_("div",at,[v.value?(n(),_("div",lt,[l("div",ot,[i(e(E),{file:a.value},null,8,["file"])]),l("div",st,[l("div",rt,[l("h2",nt,[l("span",it,o(t.$t("craftable-pro","Details for")),1),f(" "+o(((r=a.value.custom_properties)==null?void 0:r.name)||a.value.file_name),1)]),l("p",dt,o(e(A)(a.value.size)),1)])])])):h("",!0),v.value?(n(),_("div",ut,[l("h3",ct,o(t.$t("craftable-pro","Information")),1),l("dl",mt,[l("div",pt,[l("dt",ft,o(t.$t("craftable-pro","Model type")),1),l("dd",_t,o(a.value.model_type),1)]),l("div",vt,[l("dt",gt,o(t.$t("craftable-pro","Model ID")),1),l("dd",yt,o(a.value.model_id),1)]),l("div",bt,[l("dt",ht,o(t.$t("craftable-pro","Collection")),1),l("dd",$t,o(a.value.collection_name),1)]),(n(!0),_(D,null,P(a.value.custom_properties,(u,$)=>(n(),_(D,null,[$!=="name"?(n(),b(Ke,{key:$,modelValue:a.value.custom_properties[$],"onUpdate:modelValue":y=>a.value.custom_properties[$]=y,propertyName:$,onSaved:pe},null,8,["modelValue","onUpdate:modelValue","propertyName"])):h("",!0)],64))),256)),l("div",wt,[l("dt",kt,o(t.$t("craftable-pro","Mime Type")),1),l("dd",xt,o(a.value.mime_type),1)]),l("div",Vt,[l("dt",Ct,o(t.$t("craftable-pro","Uploaded at")),1),l("dd",Ut,o(e(re)(a.value.created_at).format("DD.MM.YYYY HH:mm")),1)]),l("div",It,[l("dt",Dt,o(t.$t("craftable-pro","Last modified")),1),l("dd",Ft,o(e(re)(a.value.updated_at).format("DD.MM.YYYY HH:mm")),1)])])])):h("",!0),v.value?(n(),_("div",Mt,[i(e(M),{as:"a",leftIcon:e(he),href:a.value.original_url,download:((x=a.value.custom_properties)==null?void 0:x.name)||a.value.file_name},{default:s(()=>[f(o(t.$t("craftable-pro","Download")),1)]),_:1},8,["leftIcon","href","download"]),i(e(ce),{type:"danger"},{trigger:s(({setIsOpen:u})=>[Y((n(),b(e(M),{color:"gray",variant:"outline",leftIcon:e($e),onClick:()=>u(!0)},{default:s(()=>[f(o(t.$t("craftable-pro","Delete")),1)]),_:2},1032,["leftIcon","onClick"])),[[le,"craftable-pro.media.destroy"]])]),title:s(()=>{var u;return[l("div",jt,[f(o(t.$t("craftable-pro","Delete"))+" ",1),l("p",zt,o(((u=a.value.custom_properties)==null?void 0:u.name)||a.value.file_name),1)])]}),content:s(()=>[f(o(t.$t("craftable-pro","Are you sure you want to delete this media? It will be permanently removed from our servers and all links pointing to it will be broken. This action cannot be undone.")),1)]),buttons:s(({setIsOpen:u})=>[i(e(M),{color:"danger",onClick:d[10]||(d[10]=ne(()=>{z(a.value.id)},["prevent"]))},{default:s(()=>[f(o(t.$t("craftable-pro","Delete")),1)]),_:1}),i(e(M),{color:"gray",variant:"outline",onClick:ne(()=>u(),["prevent"])},{default:s(()=>[f(o(t.$t("craftable-pro","Cancel")),1)]),_:2},1032,["onClick"])]),_:1})])):h("",!0)])),[[oe,{duration:100}]])]}),_:1})):h("",!0)]),default:s(()=>[i(e(Ue),{"no-padding":p.value==="list"},{tabs:s(()=>[i(e(K),{href:t.route("craftable-pro.media.index"),selected:g(t.route("craftable-pro.media.index"))},{default:s(()=>[f(o(t.$t("craftable-pro","All")),1)]),_:1},8,["href","selected"]),i(e(K),{href:t.route("craftable-pro.media.images"),selected:g(t.route("craftable-pro.media.images"))},{default:s(()=>[f(o(t.$t("craftable-pro","Images")),1)]),_:1},8,["href","selected"]),i(e(K),{href:t.route("craftable-pro.media.files"),selected:g(t.route("craftable-pro.media.files"))},{default:s(()=>[f(o(t.$t("craftable-pro","Files")),1)]),_:1},8,["href","selected"])]),actions:s(()=>[l("div",Re,[i(e(Ne),{"active-filters-count":e(k),"reset-filters":e(L)},{default:s(()=>{var r,x,u,$;return[(r=t.filterOptions.model_type)!=null&&r.length?(n(),b(e(B),{key:0,modelValue:e(w).model_type,"onUpdate:modelValue":d[0]||(d[0]=y=>e(w).model_type=y),name:"model_type",label:t.$t("craftable-pro","Model type"),options:t.filterOptions.model_type},null,8,["modelValue","label","options"])):h("",!0),(x=t.filterOptions.collection_name)!=null&&x.length?(n(),b(e(B),{key:1,modelValue:e(w).collection_name,"onUpdate:modelValue":d[1]||(d[1]=y=>e(w).collection_name=y),name:"collection_name",label:t.$t("craftable-pro","Collection"),options:t.filterOptions.collection_name},null,8,["modelValue","label","options"])):h("",!0),(u=t.filterOptions.mime_type)!=null&&u.length?(n(),b(e(B),{key:2,modelValue:e(w).mime_type,"onUpdate:modelValue":d[2]||(d[2]=y=>e(w).mime_type=y),name:"mime_type",label:t.$t("craftable-pro","Mime type"),options:t.filterOptions.mime_type},null,8,["modelValue","label","options"])):h("",!0),($=t.filterOptions.disk)!=null&&$.length?(n(),b(e(B),{key:3,modelValue:e(w).disk,"onUpdate:modelValue":d[3]||(d[3]=y=>e(w).disk=y),name:"disk",label:t.$t("craftable-pro","Disk"),options:t.filterOptions.disk},null,8,["modelValue","label","options"])):h("",!0)]}),_:1},8,["active-filters-count","reset-filters"]),l("div",qe,[l("div",Ge,[l("div",{class:F(["absolute inset-0 right-auto w-1/2 p-0.5 transition-all",{"translate-x-0":p.value==="grid","translate-x-full":p.value==="list"}])},Qe,2),(n(),_(D,null,P(["grid","list"],r=>i(e(me),{key:r,size:"xs",icon:r==="grid"?e(we):e(ke),variant:(p.value===r,"ghost"),color:p.value===r?"primary":"gray",class:F([{"!bg-transparent":p.value===r},"z-10"]),onClick:x=>p.value=r},null,8,["icon","variant","color","class","onClick"])),64))])])])]),footer:s(()=>[i(e(Ie),null,{default:s(()=>[i(e(De),{pagination:m.value,"data-key":"data"},null,8,["pagination"])]),_:1})]),default:s(()=>[l("section",null,[t.data.data.length?(n(),_(D,{key:1},[p.value==="grid"?Y((n(),_("ul",{key:0,role:"list",class:F(["3xl:grid-cols-5 grid grid-cols-2 gap-x-4 gap-y-8 sm:grid-cols-3 sm:gap-x-6 lg:grid-cols-4 xl:gap-x-8",[a.value?"xl:grid-cols-3 2xl:grid-cols-4":"xl:grid-cols-5 2xl:grid-cols-5"]])},[(n(!0),_(D,null,P(t.data.data,r=>{var x,u,$;return n(),_("li",{key:r.id,class:"relative"},[l("button",{type:"button",onClick:y=>G(r),onKeyup:d[4]||(d[4]=ie(y=>(a.value=null,c.value=!1),["esc"])),class:F([((x=a.value)==null?void 0:x.id)===r.id&&c.value&&"ring-primary-500 ring-2 ring-offset-2",c.value&&"focus-within:ring-primary-500 focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-offset-gray-100","group block w-full overflow-hidden rounded-md border border-gray-100 focus:outline-none"]),onFocus:d[5]||(d[5]=y=>c.value=!0),onBlur:d[6]||(d[6]=y=>c.value=!1),tabindex:"0"},[i(e(E),{file:r},null,8,["file"]),l("span",Xe,o(t.$t("craftable-pro","View details for :name",{name:((u=r.custom_properties)==null?void 0:u.name)||r.file_name})),1)],42,We),l("p",Ze,o((($=r.custom_properties)==null?void 0:$.name)||r.file_name),1),l("p",et,o(e(A)(r.size)),1)])}),128))],2)),[[oe]]):h("",!0),p.value==="list"?(n(),_("div",tt,[i(e(Me),{"base-url":N.value,data:t.data,"data-key":"data","with-pagination":!1,"with-bulk-select":!1,class:"inline-block min-w-full align-middle"},{tableHead:s(()=>[i(e(H),null,{default:s(()=>[f(o(t.$t("craftable-pro","Preview")),1)]),_:1}),i(e(H),{"sort-by":"title"},{default:s(()=>[f(o(t.$t("craftable-pro","Title")),1)]),_:1}),i(e(H),{"sort-by":"size"},{default:s(()=>[f(o(t.$t("craftable-pro","Size")),1)]),_:1})]),tableRow:s(({item:r,action:x})=>[i(e(S),{onClick:u=>G(r),onKeyup:d[7]||(d[7]=ie(u=>(a.value=null,c.value=!1),["esc"])),onFocus:d[8]||(d[8]=u=>c.value=!0),onBlur:d[9]||(d[9]=u=>c.value=!1),tabindex:"0"},{default:s(()=>{var u;return[i(e(E),{file:r,class:F(["!w-14 cursor-pointer",[((u=a.value)==null?void 0:u.id)===r.id&&c.value&&"ring-primary-500 ring-2 ring-offset-2",c.value&&"focus-within:ring-primary-500 focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-offset-gray-100","group block w-full overflow-hidden rounded-md border border-gray-100"]])},null,8,["file","class"])]}),_:2},1032,["onClick"]),i(e(S),null,{default:s(()=>{var u;return[f(o(((u=r.custom_properties)==null?void 0:u.name)||r.file_name),1)]}),_:2},1024),i(e(S),null,{default:s(()=>[f(o(e(A)(r.size)),1)]),_:2},1024)]),_:1},8,["base-url","data"])])):h("",!0)],64)):(n(),b(e(Fe),{key:0}))])]),_:1},8,["no-padding"])]),_:1})],64)}}}),qt=O({__name:"Index",props:{data:{},filterOptions:{}},setup(U){const g=U;return(I,v)=>(n(),b(Ot,xe(Ve(g)),null,16))}});export{qt as default};
