import{d as O,an as fe,o as n,e as b,w as s,j as ue,G as f,t as o,D as i,f as e,M as _e,ae as R,a as _,b as l,n as F,q as M,c as q,g as h,R as D,aZ as ve,bT as ge,am as ye,Q as V,F as se,v as B,b0 as be,P,aK as re,bU as he,a$ as $e,a4 as ne,bV as we,bW as ke,bX as ie,al as T,aH as xe,aI as Ve}from"./vendor-d45124f2.js";import{a as j,h as me,z as Ce,_ as de,j as ce,y as H,f as Ue,C as Ie,A as De,E as Fe,g as je,i as A,L as S}from"./index-1b5bb668.js";import{_ as Me}from"./PageHeader.vue_vue_type_script_setup_true_lang-10c52b00.js";import{_ as ze}from"./PageContent.vue_vue_type_script_setup_true_lang-cfff65eb.js";import{_ as Y}from"./Tag.vue_vue_type_script_setup_true_lang-26dcd870.js";import{_ as Oe,a as E}from"./ImageEditor.vue_vue_type_script_setup_true_lang-a11550a8.js";import{_ as K}from"./Tab.vue_vue_type_script_setup_true_lang-e642cf95.js";import{_ as Ne}from"./FiltersDropdown.vue_vue_type_script_setup_true_lang-e80272f9.js";import{u as Le}from"./useListingFilters-73633904.js";import{u as Be}from"./useFormLocale-24329544.js";import"./pickBy-f54d659e.js";import"./_baseIteratee-3ccc71d1.js";const Ye=O({__name:"ImageUploadModal",emits:["imageUploaded"],setup(U,{emit:g}){const I=g,v=fe({default:[]}),m=()=>{R.post("/admin/unassigned-media-upload",v.data()).then(a=>{I("imageUploaded",a.data.media),v.default=[]}).catch(a=>console.error(a))};return(a,p)=>(n(),b(e(me),{class:"flex items-center justify-center"},{trigger:s(({setIsOpen:c})=>[ue(a.$slots,"button",{setIsOpen:c})]),title:s(()=>[f(o(a.$t("craftable-pro","Upload media")),1)]),content:s(()=>[i(e(Oe),{modelValue:e(v).default,"onUpdate:modelValue":p[0]||(p[0]=c=>e(v).default=c),centered:"",maxNumberOfFiles:1},{icon:s(()=>[i(e(_e),{class:"mb-2 h-10 w-10 stroke-1 text-gray-500"})]),_:1},8,["modelValue"])]),buttons:s(({setIsOpen:c})=>[i(e(j),{style:{"background-color":"darkorange","border-radius":"20px"},onClick:()=>{c(!1),m()}},{default:s(()=>[f(o(a.$t("craftable-pro","Submit")),1)]),_:2},1032,["onClick"])]),_:3}))}}),Pe={class:"pointer-events-auto w-screen max-w-xs pl-10 md:max-w-sm xl:relative xl:pl-0 2xl:max-w-md"},Te=O({__name:"Aside",props:{noPadding:{type:Boolean,default:!1}},setup(U){return(g,I)=>(n(),_("aside",Pe,[l("div",{class:F(["flex h-full flex-col overflow-y-auto border-l border-gray-200 bg-white",{"px-4 py-5 sm:p-6":!g.noPadding}])},[ue(g.$slots,"default")],2)]))}}),He={class:"flex items-center gap-x-2"},Ae={class:"text-gray-500"},Se={class:"ml-auto flex items-center whitespace-nowrap text-gray-900"},Ee={key:0},Ke=O({__name:"CustomPropertyInput",props:{modelValue:{},propertyName:{}},emits:["localeChanged","update:modelValue","saved"],setup(U,{emit:g}){const I=U,v=M(!1),{availableLocales:m,currentLocale:a}=Be(),p=M(a),c=q({get:()=>I.modelValue,set:k=>{L("update:modelValue",k)}}),N=()=>{const k=m==null?void 0:m.findIndex(C=>C===p.value);p.value=m[k+1]??m[0]},w=()=>{v.value&&L("saved"),v.value=!v.value},L=g;return(k,C)=>(n(),_("div",{class:F(["flex w-full items-center justify-start gap-x-1 text-sm font-medium",{"py-1.5":!0}])},[l("dt",He,[typeof c.value=="object"&&c.value!==null?(n(),_("button",{key:0,onClick:N},[i(Ce,{locale:p.value,showLocale:!1,class:"w-4"},null,8,["locale"])])):h("",!0),l("span",Ae,o(k.$t("craftable-pro",k.propertyName)),1)]),l("dd",Se,[v.value?(n(),_(D,{key:1},[typeof c.value=="object"&&c.value!==null?(n(),b(e(de),{key:0,modelValue:c.value[p.value],"onUpdate:modelValue":C[0]||(C[0]=z=>c.value[p.value]=z),size:"sm","label-placement":"left",name:k.propertyName,class:"w-full"},null,8,["modelValue","name"])):(n(),b(e(de),{key:1,modelValue:c.value,"onUpdate:modelValue":C[1]||(C[1]=z=>c.value=z),size:"sm","label-placement":"left",name:k.propertyName,class:"w-full"},null,8,["modelValue","name"]))],64)):(n(),_("span",Ee,o(typeof c.value=="object"&&c.value!==null?c.value[p.value]:c.value),1)),i(e(ce),{class:"ml-2",variant:"ghost",color:"gray",size:"sm",icon:v.value?e(ve):e(ge),onClick:w},null,8,["icon"])])]))}}),Re={class:"flex items-center gap-4 divide-x"},qe={class:"flex items-center gap-4 pl-4"},Ge={class:"relative flex gap-1 rounded-md bg-gray-100 p-0.5"},Qe=["onClick"],We={class:"sr-only focus:outline-none"},Xe={class:"pointer-events-none mt-2 block truncate text-sm font-medium text-gray-900"},Ze={class:"pointer-events-none block text-sm font-medium text-gray-500"},Je={key:1,class:"overflow-x-auto"},et={class:"space-y-6 pb-16"},tt={key:0},at={class:"mb-4 block w-full overflow-hidden rounded-lg"},lt={class:"flex items-start justify-between"},ot={class:"overflow-auto"},st={class:"truncate text-lg font-medium text-gray-900"},rt={class:"sr-only"},nt={class:"text-sm font-medium text-gray-500"},it={key:1},dt={class:"font-medium text-gray-900"},ut={class:"mt-2 divide-y divide-gray-200 border-t border-b border-gray-200"},mt={class:"py-3 text-sm font-medium"},ct={class:"text-gray-500"},pt={class:"whitespace-nowrap text-gray-900"},ft={class:"flex justify-between py-3 text-sm font-medium"},_t={class:"text-gray-500"},vt={class:"whitespace-nowrap text-gray-900"},gt={class:"flex justify-between py-3 text-sm font-medium"},yt={class:"text-gray-500"},bt={class:"whitespace-nowrap text-gray-900"},ht={class:"flex justify-between py-3 text-sm font-medium"},$t={class:"text-gray-500"},wt={class:"whitespace-nowrap text-gray-900"},kt={class:"flex justify-between py-3 text-sm font-medium"},xt={class:"text-gray-500"},Vt={class:"whitespace-nowrap text-gray-900"},Ct={class:"flex justify-between py-3 text-sm font-medium"},Ut={class:"text-gray-500"},It={class:"whitespace-nowrap text-gray-900"},Dt={key:2,class:"flex gap-4"},Ft={class:"max-w-sm"},jt={class:"truncate text-gray-500"},Mt=O({__name:"Index",props:{data:{},filterOptions:{}},setup(U){var Q,W,X,Z,J,ee,te,ae;const g=t=>{const d=V().url.split("?")[0];return`${t}?`.indexOf(`${d}?`)!==-1},I=U,v=M(!0),m=M(!1),a=M(null),p=M("grid");ye(()=>a.value,()=>{v.value=!1,setTimeout(()=>{v.value=!0},200)});const c=q(()=>I.data),N=q(()=>g(route("craftable-pro.media.images"))?route("craftable-pro.media.images"):g(route("craftable-pro.media.files"))?route("craftable-pro.media.files"):route("craftable-pro.media.index")),{filtersForm:w,resetFilters:L,activeFiltersCount:k}=Le(N.value,{model_type:(Q=V().props.filter)!=null&&Q.model_type?[(W=V().props.filter)==null?void 0:W.model_type]:[],collection_name:(X=V().props.filter)!=null&&X.collection_name?[(Z=V().props.filter)==null?void 0:Z.collection_name]:[],mime_type:(J=V().props.filter)!=null&&J.mime_type?[(ee=V().props.filter)==null?void 0:ee.mime_type]:[],disk:(te=V().props.filter)!=null&&te.disk?[(ae=V().props.filter)==null?void 0:ae.disk]:[]}),C=t=>{t&&T.reload({only:["data"]})},z=t=>{R.delete("/admin/unassigned-media-destroy/"+t).then(d=>{a.value=null,T.reload({only:["data"]})}).catch(d=>console.error(d))},pe=()=>{R.post("/admin/media/update/"+a.value.id,{custom_properties:a.value.custom_properties}).then(t=>{T.reload({only:["data"]})}).catch(t=>console.error(t))},G=t=>{a.value===t&&m.value?(a.value=null,m.value=!1):(a.value=t,m.value=!0)};return(t,d)=>{const le=se("can"),oe=se("auto-animate");return n(),_(D,null,[i(e(Me),{title:t.$t("craftable-pro","Media")},{default:s(()=>[i(e(Ye),{onImageUploaded:C},{button:s(({setIsOpen:r})=>[B((n(),b(e(j),{style:{"background-color":"darkorange","border-radius":"20px"},"left-icon":e(be),as:"button",onClick:()=>r(!0)},{default:s(()=>[f(o(t.$t("craftable-pro","Upload media")),1)]),_:2},1032,["left-icon","onClick"])),[[le,"craftable-pro.media.upload"]])]),_:1})]),_:1},8,["title"]),i(e(ze),null,{aside:s(()=>[a.value?(n(),b(e(Te),{key:0,class:"hidden xl:block"},{default:s(()=>{var r,x;return[B((n(),_("div",et,[v.value?(n(),_("div",tt,[l("div",at,[i(e(E),{file:a.value},null,8,["file"])]),l("div",lt,[l("div",ot,[l("h2",st,[l("span",rt,o(t.$t("craftable-pro","Details for")),1),f(" "+o(((r=a.value.custom_properties)==null?void 0:r.name)||a.value.file_name),1)]),l("p",nt,o(e(H)(a.value.size)),1)])])])):h("",!0),v.value?(n(),_("div",it,[l("h3",dt,o(t.$t("craftable-pro","Information")),1),l("dl",ut,[l("div",mt,[l("dt",ct,o(t.$t("craftable-pro","Model type")),1),l("dd",pt,o(a.value.model_type),1)]),l("div",ft,[l("dt",_t,o(t.$t("craftable-pro","Model ID")),1),l("dd",vt,o(a.value.model_id),1)]),l("div",gt,[l("dt",yt,o(t.$t("craftable-pro","Collection")),1),l("dd",bt,o(a.value.collection_name),1)]),(n(!0),_(D,null,P(a.value.custom_properties,(u,$)=>(n(),_(D,null,[$!=="name"?(n(),b(Ke,{key:$,modelValue:a.value.custom_properties[$],"onUpdate:modelValue":y=>a.value.custom_properties[$]=y,propertyName:$,onSaved:pe},null,8,["modelValue","onUpdate:modelValue","propertyName"])):h("",!0)],64))),256)),l("div",ht,[l("dt",$t,o(t.$t("craftable-pro","Mime Type")),1),l("dd",wt,o(a.value.mime_type),1)]),l("div",kt,[l("dt",xt,o(t.$t("craftable-pro","Uploaded at")),1),l("dd",Vt,o(e(re)(a.value.created_at).format("DD.MM.YYYY HH:mm")),1)]),l("div",Ct,[l("dt",Ut,o(t.$t("craftable-pro","Last modified")),1),l("dd",It,o(e(re)(a.value.updated_at).format("DD.MM.YYYY HH:mm")),1)])])])):h("",!0),v.value?(n(),_("div",Dt,[i(e(j),{as:"a",leftIcon:e(he),href:a.value.original_url,download:((x=a.value.custom_properties)==null?void 0:x.name)||a.value.file_name},{default:s(()=>[f(o(t.$t("craftable-pro","Download")),1)]),_:1},8,["leftIcon","href","download"]),i(e(me),{type:"danger"},{trigger:s(({setIsOpen:u})=>[B((n(),b(e(j),{color:"gray",variant:"outline",leftIcon:e($e),onClick:()=>u(!0)},{default:s(()=>[f(o(t.$t("craftable-pro","Delete")),1)]),_:2},1032,["leftIcon","onClick"])),[[le,"craftable-pro.media.destroy"]])]),title:s(()=>{var u;return[l("div",Ft,[f(o(t.$t("craftable-pro","Delete"))+" ",1),l("p",jt,o(((u=a.value.custom_properties)==null?void 0:u.name)||a.value.file_name),1)])]}),content:s(()=>[f(o(t.$t("craftable-pro","Are you sure you want to delete this media? It will be permanently removed from our servers and all links pointing to it will be broken. This action cannot be undone.")),1)]),buttons:s(({setIsOpen:u})=>[i(e(j),{color:"danger",onClick:d[10]||(d[10]=ne(()=>{z(a.value.id)},["prevent"]))},{default:s(()=>[f(o(t.$t("craftable-pro","Delete")),1)]),_:1}),i(e(j),{color:"gray",variant:"outline",onClick:ne(()=>u(),["prevent"])},{default:s(()=>[f(o(t.$t("craftable-pro","Cancel")),1)]),_:2},1032,["onClick"])]),_:1})])):h("",!0)])),[[oe,{duration:100}]])]}),_:1})):h("",!0)]),default:s(()=>[i(e(Ue),{"no-padding":p.value==="list"},{tabs:s(()=>[i(e(K),{href:t.route("craftable-pro.media.index"),selected:g(t.route("craftable-pro.media.index"))},{default:s(()=>[f(o(t.$t("craftable-pro","All")),1)]),_:1},8,["href","selected"]),i(e(K),{href:t.route("craftable-pro.media.images"),selected:g(t.route("craftable-pro.media.images"))},{default:s(()=>[f(o(t.$t("craftable-pro","Images")),1)]),_:1},8,["href","selected"]),i(e(K),{href:t.route("craftable-pro.media.files"),selected:g(t.route("craftable-pro.media.files"))},{default:s(()=>[f(o(t.$t("craftable-pro","Files")),1)]),_:1},8,["href","selected"])]),actions:s(()=>[l("div",Re,[i(e(Ne),{"active-filters-count":e(k),"reset-filters":e(L)},{default:s(()=>{var r,x,u,$;return[(r=t.filterOptions.model_type)!=null&&r.length?(n(),b(e(Y),{key:0,modelValue:e(w).model_type,"onUpdate:modelValue":d[0]||(d[0]=y=>e(w).model_type=y),name:"model_type",label:t.$t("craftable-pro","Model type"),options:t.filterOptions.model_type},null,8,["modelValue","label","options"])):h("",!0),(x=t.filterOptions.collection_name)!=null&&x.length?(n(),b(e(Y),{key:1,modelValue:e(w).collection_name,"onUpdate:modelValue":d[1]||(d[1]=y=>e(w).collection_name=y),name:"collection_name",label:t.$t("craftable-pro","Collection"),options:t.filterOptions.collection_name},null,8,["modelValue","label","options"])):h("",!0),(u=t.filterOptions.mime_type)!=null&&u.length?(n(),b(e(Y),{key:2,modelValue:e(w).mime_type,"onUpdate:modelValue":d[2]||(d[2]=y=>e(w).mime_type=y),name:"mime_type",label:t.$t("craftable-pro","Mime type"),options:t.filterOptions.mime_type},null,8,["modelValue","label","options"])):h("",!0),($=t.filterOptions.disk)!=null&&$.length?(n(),b(e(Y),{key:3,modelValue:e(w).disk,"onUpdate:modelValue":d[3]||(d[3]=y=>e(w).disk=y),name:"disk",label:t.$t("craftable-pro","Disk"),options:t.filterOptions.disk},null,8,["modelValue","label","options"])):h("",!0)]}),_:1},8,["active-filters-count","reset-filters"]),l("div",qe,[l("div",Ge,[l("div",{class:F(["absolute inset-0 right-auto w-1/2 p-0.5 transition-all",{"translate-x-0":p.value==="grid","translate-x-full":p.value==="list"}])},d[11]||(d[11]=[l("div",{class:"h-full w-full rounded-md bg-white shadow-sm"},null,-1)]),2),(n(),_(D,null,P(["grid","list"],r=>i(e(ce),{key:r,size:"xs",icon:r==="grid"?e(we):e(ke),variant:(p.value===r,"ghost"),color:p.value===r?"primary":"gray",class:F([{"!bg-transparent":p.value===r},"z-10"]),onClick:x=>p.value=r},null,8,["icon","variant","color","class","onClick"])),64))])])])]),footer:s(()=>[i(e(Ie),null,{default:s(()=>[i(e(De),{pagination:c.value,"data-key":"data"},null,8,["pagination"])]),_:1})]),default:s(()=>[l("section",null,[t.data.data.length?(n(),_(D,{key:1},[p.value==="grid"?B((n(),_("ul",{key:0,role:"list",class:F(["3xl:grid-cols-5 grid grid-cols-2 gap-x-4 gap-y-8 sm:grid-cols-3 sm:gap-x-6 lg:grid-cols-4 xl:gap-x-8",[a.value?"xl:grid-cols-3 2xl:grid-cols-4":"xl:grid-cols-5 2xl:grid-cols-5"]])},[(n(!0),_(D,null,P(t.data.data,r=>{var x,u,$;return n(),_("li",{key:r.id,class:"relative"},[l("button",{type:"button",onClick:y=>G(r),onKeyup:d[4]||(d[4]=ie(y=>(a.value=null,m.value=!1),["esc"])),class:F([((x=a.value)==null?void 0:x.id)===r.id&&m.value&&"ring-primary-500 ring-2 ring-offset-2",m.value&&"focus-within:ring-primary-500 focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-offset-gray-100","group block w-full overflow-hidden rounded-md border border-gray-100 focus:outline-none"]),onFocus:d[5]||(d[5]=y=>m.value=!0),onBlur:d[6]||(d[6]=y=>m.value=!1),tabindex:"0"},[i(e(E),{file:r},null,8,["file"]),l("span",We,o(t.$t("craftable-pro","View details for :name",{name:((u=r.custom_properties)==null?void 0:u.name)||r.file_name})),1)],42,Qe),l("p",Xe,o((($=r.custom_properties)==null?void 0:$.name)||r.file_name),1),l("p",Ze,o(e(H)(r.size)),1)])}),128))],2)),[[oe]]):h("",!0),p.value==="list"?(n(),_("div",Je,[i(e(je),{"base-url":N.value,data:t.data,"data-key":"data","with-pagination":!1,"with-bulk-select":!1,class:"inline-block min-w-full align-middle"},{tableHead:s(()=>[i(e(A),null,{default:s(()=>[f(o(t.$t("craftable-pro","Preview")),1)]),_:1}),i(e(A),{"sort-by":"title"},{default:s(()=>[f(o(t.$t("craftable-pro","Title")),1)]),_:1}),i(e(A),{"sort-by":"size"},{default:s(()=>[f(o(t.$t("craftable-pro","Size")),1)]),_:1})]),tableRow:s(({item:r,action:x})=>[i(e(S),{onClick:u=>G(r),onKeyup:d[7]||(d[7]=ie(u=>(a.value=null,m.value=!1),["esc"])),onFocus:d[8]||(d[8]=u=>m.value=!0),onBlur:d[9]||(d[9]=u=>m.value=!1),tabindex:"0"},{default:s(()=>{var u;return[i(e(E),{file:r,class:F(["!w-14 cursor-pointer",[((u=a.value)==null?void 0:u.id)===r.id&&m.value&&"ring-primary-500 ring-2 ring-offset-2",m.value&&"focus-within:ring-primary-500 focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-offset-gray-100","group block w-full overflow-hidden rounded-md border border-gray-100"]])},null,8,["file","class"])]}),_:2},1032,["onClick"]),i(e(S),null,{default:s(()=>{var u;return[f(o(((u=r.custom_properties)==null?void 0:u.name)||r.file_name),1)]}),_:2},1024),i(e(S),null,{default:s(()=>[f(o(e(H)(r.size)),1)]),_:2},1024)]),_:1},8,["base-url","data"])])):h("",!0)],64)):(n(),b(e(Fe),{key:0}))])]),_:1},8,["no-padding"])]),_:1})],64)}}}),Kt=O({__name:"Index",props:{data:{},filterOptions:{}},setup(U){const g=U;return(I,v)=>(n(),b(Mt,xe(Ve(g)),null,16))}});export{Kt as default};
