import{d as z,aj as E,q as C,c as T,am as L,ak as R,o as v,a as U,t as u,g as j,b as n,a4 as d,D as m,f as s,w as p,G as B,ae as P,b2 as q,Q as G,e as J,aJ as M}from"./vendor-d45124f2.js";import{m as O,a as b,t as Q,_ as f,f as Y}from"./index-1b5bb668.js";const H={class:"m-auto"},K=["for"],W={class:"block gap-4"},X=["for"],Z={class:"flex gap-4"},x=["for"],ee=["id","name"],ae=z({__name:"ImageUpload",props:{name:{},label:{},modelValue:{default:void 0},accept:{},onlyThumbs:{type:Boolean},maxFileSize:{default:1024*1024},centered:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(g,{emit:o}){const t=g,r=E(),I=o,i=C(t.modelValue),_=T(()=>{var e;return i.value?(e=i.value)==null?void 0:e.filter(a=>!a.action||a.action!=="delete"):[]});L(()=>[i.value],()=>{var e,a;(e=i.value)==null||e.forEach(l=>{S(l)}),I("update:modelValue",(a=i.value)==null?void 0:a.map(l=>R(l,["file","base64"])))},{deep:!0});const S=e=>{const a=new FileReader;a.onloadend=l=>{e.base64=a.result},e!=null&&e.file&&a.readAsDataURL(e.file)},A=e=>{const a=Array.from(e.target.files);$(a[0])},N=e=>{e&&(e.action="delete")},c=C(!1),V=()=>{c.value=!0},y=()=>{c.value=!1},h=e=>{const a=Array.from(e.dataTransfer.files);$(a[0]),c.value=!1},$=e=>{if(e.size>t.maxFileSize){r.error(Q("craftable-pro","File size is too big!"));return}const a=new FormData;a.append("file",e),P.post("/admin/upload",a,{headers:{"Content-Type":"multipart/form-data"}}).then(l=>{i.value=[{id:null,uuid:q(),collection_name:"images",action:"add",path:l.data.path,size:e.size,file_name:e.name,custom_properties:{name:e.name,alt:""},file:e}]}).catch(l=>{console.error(l==null?void 0:l.message)})};return(e,a)=>{var l,w,D,F;return v(),U("div",H,[e.label?(v(),U("label",{key:0,for:e.name,class:"text-blue-gray-900 mb-1 w-full text-center block text-sm font-medium"},u(e.label),9,K)):j("",!0),n("div",W,[n("label",{for:e.name,class:"text-blue-gray-900 relative cursor-pointer text-sm font-medium",onDragover:d(V,["prevent"]),onDragleave:d(y,["prevent"]),onDrop:d(h,["prevent"])},[m(s(O),{class:"m-auto w-44 h-44",size:"xl",src:((w=(l=_.value)==null?void 0:l[0])==null?void 0:w.preview_url)??((F=(D=_.value)==null?void 0:D[0])==null?void 0:F.base64)},null,8,["src"])],40,X),n("div",Z,[m(s(b),{variant:"outline",color:"gray",class:"relative"},{default:p(()=>[n("label",{for:e.name,class:"text-blue-gray-900 relative cursor-pointer text-sm font-medium",onDragover:d(V,["prevent"]),onDragleave:d(y,["prevent"]),onDrop:d(h,["prevent"])},[n("span",null,u(e.$t("craftable-pro","Change")),1)],40,x),n("input",{id:e.name,name:e.name,type:"file",class:"absolute inset-0 -z-10 h-full w-full cursor-pointer rounded-md border-gray-300 opacity-0",onInput:A},null,40,ee)]),_:1}),m(s(b),{variant:"ghost",color:"primary",onClick:a[0]||(a[0]=te=>{var k;return N((k=i.value)==null?void 0:k[0])})},{default:p(()=>[B(u(e.$t("craftable-pro","Remove")),1)]),_:1})])])])}}}),oe={class:"grid grid-cols-3 gap-6 m-auto w-6/12"},le={class:"flex items-center justify-start col-span-3"},ne=z({__name:"ProfileCard",props:{form:{},submit:{type:Function}},setup(g){return T(()=>G().props.settings.available_locales),(o,t)=>(v(),J(s(Y),{title:o.$t("Your Profile")},{default:p(()=>[n("div",oe,[m(s(ae),{modelValue:o.form.avatar,"onUpdate:modelValue":t[0]||(t[0]=r=>o.form.avatar=r),name:"avatar",label:o.$t("craftable-pro","User photo"),class:"col-span-3"},null,8,["modelValue","label"]),m(s(f),{modelValue:o.form.first_name,"onUpdate:modelValue":t[1]||(t[1]=r=>o.form.first_name=r),name:"first_name",label:o.$t("craftable-pro","First name"),class:"col-span-6 sm:col-span-3"},null,8,["modelValue","label"]),m(s(f),{modelValue:o.form.last_name,"onUpdate:modelValue":t[2]||(t[2]=r=>o.form.last_name=r),name:"last_name",label:o.$t("craftable-pro","Last name"),class:"col-span-6 sm:col-span-3"},null,8,["modelValue","label"]),m(s(f),{modelValue:o.form.email,"onUpdate:modelValue":t[3]||(t[3]=r=>o.form.email=r),name:"email",label:o.$t("craftable-pro","E-mail"),type:"email",class:"col-span-6 sm:col-span-3",disabled:""},null,8,["modelValue","label"]),n("div",le,[m(s(b),{class:"mt-5",leftIcon:s(M),onClick:o.submit,loading:o.form.processing},{default:p(()=>[B(u(o.$t("craftable-pro","Save")),1)]),_:1},8,["leftIcon","onClick","loading"])])])]),_:1},8,["title"]))}});export{ne as _};
