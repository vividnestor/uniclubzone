import{d as V,an as z,aj as E,o as p,e as h,w as a,D as r,f as e,aP as x,G as m,t,b as s,a4 as L,a as C,R as D,P as J,q as $,cb as H,v as w,cc as A,g as M,al as ee,ae as q,Q as ae,F as te,b$ as le,aM as oe,aJ as ne,aK as se}from"./vendor-fc9552fb.js";import{j as K,_ as re,a as I,h as j,t as Q,d as ue,l as ie,r as pe,n as ce,o as R,g as de,i as B,L as P}from"./index-3d1a2934.js";import{_ as fe}from"./PageHeader.vue_vue_type_script_setup_true_lang-8b2a5c80.js";import{_ as me}from"./PageContent.vue_vue_type_script_setup_true_lang-f12642fa.js";import{_ as N}from"./Tag.vue_vue_type_script_setup_true_lang-e877305e.js";import{_ as ge}from"./FiltersDropdown.vue_vue_type_script_setup_true_lang-e49e8945.js";import{u as be}from"./useListingFilters-c4c40895.js";import"./pickBy-4f81202a.js";import"./_baseIteratee-14b2df24.js";const ve=V({__name:"EditTranslationModal",props:{languageLine:{},locales:{}},setup(O){const g=O,u=z({text:g.languageLine.text}),i=E(),v=l=>{u.post(route("craftable-pro.translations.update",[g.languageLine.id]),{onFinish:()=>{l(),i.success(Q("craftable-pro","Translation was successfully updated"))}})};return(l,f)=>(p(),h(e(j),null,{trigger:a(({setIsOpen:c})=>[r(e(K),{as:"button",onClick:()=>c(!0),variant:"ghost",color:"gray",icon:e(x)},null,8,["onClick","icon"])]),title:a(()=>[m(t(l.$t("craftable-pro","Edit translation")),1)]),content:a(()=>[s("form",{class:"space-y-6",onSubmit:L(v,["prevent"])},[(p(!0),C(D,null,J(l.locales,c=>(p(),C("div",null,[r(e(re),{modelValue:e(u).text[c],"onUpdate:modelValue":o=>e(u).text[c]=o,label:c,name:"text",type:"text"},null,8,["modelValue","onUpdate:modelValue","label"])]))),256))],32)]),buttons:a(({setIsOpen:c})=>[r(e(I),{loading:e(u).processing,onClick:L(o=>v(c),["prevent"])},{default:a(()=>[m(t(l.$t("craftable-pro","Save")),1)]),_:2},1032,["loading","onClick"]),r(e(I),{color:"gray",variant:"outline",onClick:L(()=>c(),["prevent"])},{default:a(()=>[m(t(l.$t("craftable-pro","Cancel")),1)]),_:2},1032,["onClick"])]),_:1}))}}),_e={class:"space-y-6"},ye=V({__name:"ExportModal",props:{locales:{},open:{type:Boolean}},emits:["toggleOpen"],setup(O,{emit:g}){const u=z({exportLanguages:[]}),i=f=>{window.location.href="/admin/translations/export?exportLanguages[]="+u.exportLanguages.join("&exportLanguages[]="),f()},v=g,l=()=>{v("toggleOpen")};return(f,c)=>(p(),h(e(j),{open:f.open,onToggleOpen:l,"external-open":!0},{title:a(()=>[m(t(f.$t("craftable-pro","Export translations")),1)]),content:a(()=>[s("div",_e,[r(e(N),{modelValue:e(u).exportLanguages,"onUpdate:modelValue":c[0]||(c[0]=o=>e(u).exportLanguages=o),options:f.locales,label:f.$t("craftable-pro","Languages"),mode:"tags",name:""},null,8,["modelValue","options","label"])])]),buttons:a(({setIsOpen:o})=>[r(e(I),{loading:e(u).processing,onClick:L(_=>i(o),["prevent"])},{default:a(()=>[m(t(f.$t("craftable-pro","Export")),1)]),_:2},1032,["loading","onClick"]),r(e(I),{color:"gray",variant:"outline",onClick:L(()=>o(),["prevent"])},{default:a(()=>[m(t(f.$t("craftable-pro","Cancel")),1)]),_:2},1032,["onClick"])]),_:1},8,["open"]))}}),$e={class:"my-4"},he={class:"mb-1 block text-sm font-medium text-gray-700",for:"file"},ke=V({__name:"ImportModalFirstStep",props:{locales:{},processing:{type:Boolean}},emits:["uploadFile","selectLanguage","checkOnlyMissing"],setup(O,{emit:g}){const u=g,i=$(null),v=$(null),l=$(null),f=$(!1),c=o=>{var _;l.value=o.target.files[0],u("uploadFile",o.target.files[0],(_=i==null?void 0:i.value)==null?void 0:_.files[0])};return H(()=>{u("selectLanguage",v.value)}),H(()=>{u("checkOnlyMissing",f.value)}),(o,_)=>(p(),C("form",null,[s("div",$e,[s("label",he,[l.value?(p(),C(D,{key:0},[m(t(l.value.name),1)],64)):(p(),C(D,{key:1},[m(t(o.$t("craftable-pro","Choose file")),1)],64))]),s("input",{id:"file",ref_key:"file",ref:i,class:"w-full",name:"importFile",type:"file",onInput:c},null,544)]),r(e(N),{modelValue:v.value,"onUpdate:modelValue":_[0]||(_[0]=F=>v.value=F),options:o.locales,label:o.$t("craftable-pro","Languages to import"),mode:"single",name:""},null,8,["modelValue","options","label"]),r(ue,{modelValue:f.value,"onUpdate:modelValue":_[1]||(_[1]=F=>f.value=F),class:"mt-2",label:o.$t("craftable-pro","Do not override existing translations")},null,8,["modelValue","label"])]))}}),Ce={class:"text-sm font-medium text-gray-700"},Te=V({__name:"ImportModalThirdStep",props:{numberOfSuccessfullyImportedTranslations:{},numberOfSuccessfullyUpdatedTranslations:{}},setup(O){return(g,u)=>(p(),C("p",Ce,t(g.$t("craftable-pro",":count successfully imported",{count:g.numberOfSuccessfullyImportedTranslations.toString()}))+" "+t(g.$t("craftable-pro",":count successfully updated",{count:g.numberOfSuccessfullyUpdatedTranslations.toString()})),1))}}),we={class:"text-sm font-medium text-gray-700"},Oe={class:"border-separate border-spacing-3 border-gray-500"},Fe=s("th",{style:{display:"none"}},null,-1),Le={key:0},Ie={style:{"word-break":"break-all"}},Ve={style:{"word-break":"break-all"}},Se={style:{"word-break":"break-all"}},Me=["id","onUpdate:modelValue","name"],Ue=["for"],De={style:{"word-break":"break-all"}},Be=["id","onUpdate:modelValue","name"],Pe=["for"],Re=s("td",{style:{display:"none"}},null,-1),Ee=V({__name:"ImportModalSecondStep",props:{numberOfFoundTranslations:{},numberOfTranslationsToReview:{},translationsToImport:{},importLanguage:{}},emits:["importedTranslationsChanged"],setup(O,{emit:g}){const u=O,i=g,v=()=>{i("importedTranslationsChanged",u.translationsToImport)};return(l,f)=>(p(),C("form",null,[s("div",we,[s("p",null,t(l.$t("craftable-pro","Found: :found / For review: :toReview",{found:l.numberOfFoundTranslations.toString(),toReview:l.numberOfTranslationsToReview.toString()})),1)]),s("table",Oe,[s("thead",null,[s("tr",null,[s("th",null,t(l.$t("craftable-pro","Group")),1),s("th",null,t(l.$t("craftable-pro","Default")),1),s("th",null,t(l.$t("craftable-pro","Current value")),1),s("th",null,t(l.$t("craftable-pro","Imported value")),1),Fe])]),s("tbody",null,[(p(!0),C(D,null,J(l.translationsToImport,(c,o)=>(p(),C(D,null,[c.has_conflict?(p(),C("tr",Le,[s("td",Ie,t(c.group),1),s("td",Ve,t(c.default),1),s("td",Se,[w(s("input",{id:"current-"+o+"0","onUpdate:modelValue":_=>l.translationsToImport[o].checkedCurrent=_,name:"current-"+o,value:!0,class:"import-radio",type:"radio",onChange:v},null,40,Me),[[A,l.translationsToImport[o].checkedCurrent]]),s("label",{for:"current-"+o+"0",class:"form-check-label label-import"},t(l.translationsToImport[o].current_value),9,Ue)]),s("td",De,[w(s("input",{id:"current-"+o+"1","onUpdate:modelValue":_=>l.translationsToImport[o].checkedCurrent=_,name:"current-"+o,value:!1,class:"import-radio",type:"radio",onChange:v},null,40,Be),[[A,l.translationsToImport[o].checkedCurrent]]),s("label",{checked:!0,for:"current-"+o+"1",class:"form-check-label label-import"},t(l.translationsToImport[o][l.importLanguage.toLowerCase()]),9,Pe)]),Re])):M("",!0)],64))),256))])])]))}}),je=V({__name:"ImportModal",props:{locales:{},open:{type:Boolean}},emits:["toggleOpen"],setup(O,{emit:g}){const u=$(!1),i=$(1),v=$(null),l=$(null),f=$(""),c=$(null),o=$(null),_=$(null),F=$(0),n=$([]),y=$(!1),T=b=>{l.value=b,v.value=b},k=b=>{f.value=b},G=b=>{y.value=b},Y=E(),W=g,X=()=>{W("toggleOpen")},Z=()=>{if(u.value=!0,i.value===1){let b=route("craftable-pro.translations.import"),S=new FormData;S.append("fileImport",l.value??""),S.append("importLanguage",f.value),S.append("onlyMissing",y.value?"1":"0"),q.post(b,S,{headers:{"Content-Type":"multipart/form-data"}}).then(d=>{if(d.data.hasOwnProperty("numberOfImportedTranslations")&&d.data.hasOwnProperty("numberOfUpdatedTranslations"))i.value=3,c.value=d.data.numberOfImportedTranslations,o.value=d.data.numberOfUpdatedTranslations;else{i.value=2,_.value=Object.keys(d.data).length,n.value=d.data;for(let U=0;U<n.value.length;U++)n.value[U].hasOwnProperty("has_conflict")&&n.value[U].has_conflict&&F.value++}},d=>{const U=d.response.data.message||d.response.data;Y.error(U)}).finally(()=>{u.value=!1})}else if(i.value===2){for(let d=0;d<n.value.length;d++)n.value[d].hasOwnProperty("checkedCurrent")&&n.value[d].checkedCurrent&&(n.value[d][f.value.toLowerCase()]=n.value[d].current_value);let b="/admin/translations/import/conflicts",S={importLanguage:f.value,resolvedTranslations:n.value};q.post(b,S).then(d=>{i.value=3,c.value=d.data.numberOfImportedTranslations,o.value=d.data.numberOfUpdatedTranslations},d=>{Y.error(Q("craftable-pro","An error has occurred."))}).finally(()=>{u.value=!1})}};return(b,S)=>(p(),h(e(j),{open:b.open,onToggleOpen:X,"external-open":!0},{title:a(()=>[m(t(b.$t("craftable-pro","Import translations")),1)]),content:a(()=>[i.value===1?(p(),h(ke,{key:0,locales:b.locales,processing:u.value,onUploadFile:T,onSelectLanguage:k,onCheckOnlyMissing:G},null,8,["locales","processing"])):M("",!0),i.value===2?(p(),h(Ee,{key:1,"import-language":f.value,locales:b.locales,"number-of-found-translations":_.value,"number-of-translations-to-review":F.value,processing:u.value,"translations-to-import":n.value},null,8,["import-language","locales","number-of-found-translations","number-of-translations-to-review","processing","translations-to-import"])):M("",!0),i.value===3?(p(),h(Te,{key:2,locales:b.locales,"number-of-successfully-imported-translations":c.value,"number-of-successfully-updated-translations":o.value,processing:u.value},null,8,["locales","number-of-successfully-imported-translations","number-of-successfully-updated-translations","processing"])):M("",!0)]),buttons:a(({setIsOpen:d})=>[i.value!==3?(p(),h(e(I),{key:0,disabled:u.value,onClick:L(Z,["prevent"])},{default:a(()=>[m(t(b.$t("craftable-pro","Next step")),1)]),_:1},8,["disabled"])):M("",!0),i.value!==3?(p(),h(e(I),{key:1,variant:"outline",color:"gray",onClick:L(()=>{d()},["prevent"])},{default:a(()=>[m(t(b.$t("craftable-pro","Cancel")),1)]),_:2},1032,["onClick"])):M("",!0),i.value===3?(p(),h(e(I),{key:2,onClick:L(()=>{d(),e(ee).reload(),i.value=1},["prevent"])},{default:a(()=>[m(t(b.$t("craftable-pro","Finish import")),1)]),_:2},1032,["onClick"])):M("",!0)]),_:1},8,["open"]))}}),Ne={class:"flex"},Ge={class:"py-1"},Ye={class:"max-w-sm overflow-hidden text-ellipsis"},He={class:"max-w-sm overflow-hidden text-ellipsis"},Ae={class:"flex items-center justify-end gap-3"},qe=V({__name:"Index",props:{data:{},groups:{},locales:{}},setup(O){var _,F;const g=E(),{action:u}=ie(),i=$(!1),v=$(!1),{filtersForm:l,resetFilters:f,activeFiltersCount:c}=be(route("craftable-pro.translations.index"),{group:((F=(_=ae().props)==null?void 0:_.filter)==null?void 0:F.group)??null}),o=()=>{window.location.reload()};return(n,y)=>{const T=te("can");return p(),C(D,null,[r(e(fe),{title:n.$t("craftable-pro","Translations")},{default:a(()=>[s("div",Ne,[w(r(ye,{onToggleOpen:y[0]||(y[0]=k=>i.value=!i.value),open:i.value,locales:n.locales},null,8,["open","locales"]),[[T,"craftable-pro.translation.export"]]),w(r(je,{onToggleOpen:y[1]||(y[1]=k=>v.value=!v.value),open:v.value,locales:n.locales},null,8,["open","locales"]),[[T,"craftable-pro.translation.import"]]),r(e(pe),null,{default:a(()=>[w((p(),h(e(I),{onClick:y[2]||(y[2]=()=>{e(u)("post","/admin/translations/publish",{},{onSuccess:()=>{o()}})})},{default:a(()=>[m(t(n.$t("craftable-pro","Publish translations")),1)]),_:1})),[[T,"craftable-pro.translation.publish"]]),w((p(),h(e(ce),{noContentPadding:""},{button:a(()=>[r(e(K),{icon:e(le),class:"rounded-l-none"},null,8,["icon"])]),content:a(()=>[s("div",Ge,[w((p(),h(e(R),{onClick:y[3]||(y[3]=()=>{e(u)("post","/admin/translations/rescan"),e(g).warning(n.$t("craftable-pro","Scanning translations..."))})},{default:a(()=>[m(t(n.$t("craftable-pro","Re-scan translations")),1)]),_:1})),[[T,"craftable-pro.translation.rescan"]]),w((p(),h(e(R),{onClick:y[4]||(y[4]=k=>i.value=!0)},{default:a(()=>[m(t(n.$t("craftable-pro","Export")),1)]),_:1})),[[T,"craftable-pro.translation.export"]]),w((p(),h(e(R),{onClick:y[5]||(y[5]=k=>v.value=!0)},{default:a(()=>[m(t(n.$t("craftable-pro","Import")),1)]),_:1})),[[T,"craftable-pro.translation.import"]])])]),_:1})),[[T,["craftable-pro.translation.export","craftable-pro.translation.import","craftable-pro.translation.rescan"],"any"]])]),_:1})])]),_:1},8,["title"]),r(e(me),null,{default:a(()=>[r(e(de),{data:n.data,baseUrl:n.route("craftable-pro.translations.index"),withBulkSelect:!1},{actions:a(()=>[r(e(ge),{activeFiltersCount:e(c),resetFilters:e(f)},{default:a(()=>[r(e(N),{modelValue:e(l).group,"onUpdate:modelValue":y[6]||(y[6]=k=>e(l).group=k),options:n.groups,label:n.$t("craftable-pro","Groups"),mode:"tags",name:"groups"},null,8,["modelValue","options","label"])]),_:1},8,["activeFiltersCount","resetFilters"])]),tableHead:a(()=>[r(e(B),{sortBy:"group"},{default:a(()=>[m(t(n.$t("craftable-pro","Group")),1)]),_:1}),r(e(B),{sortBy:"key"},{default:a(()=>[m(t(n.$t("craftable-pro","Default")),1)]),_:1}),r(e(B),null,{default:a(()=>[m(t(n.$page.props.auth.user.locale),1)]),_:1}),r(e(B),null,{default:a(()=>[m(t(n.$t("craftable-pro","Last update")),1)]),_:1}),r(e(B))]),tableRow:a(({item:k,action:G})=>[r(e(P),null,{default:a(()=>[m(t(k.group),1)]),_:2},1024),r(e(P),null,{default:a(()=>[s("div",Ye,t(k.key),1)]),_:2},1024),r(e(P),null,{default:a(()=>[s("div",He,t(k.text[n.$page.props.auth.user.locale]),1)]),_:2},1024),r(e(P),null,{default:a(()=>[m(t(e(oe)(k.updated_at).format("DD.MM.YYYY HH:mm")),1)]),_:2},1024),r(e(P),null,{default:a(()=>[s("div",Ae,[w(r(ve,{"language-line":k,locales:n.locales},null,8,["language-line","locales"]),[[T,"craftable-pro.translation.edit"]])])]),_:2},1024)]),_:1},8,["data","baseUrl"])]),_:1})],64)}}}),aa=V({__name:"Index",props:{data:{},groups:{},locales:{}},setup(O){return(g,u)=>(p(),h(qe,ne(se(g.$props)),null,16))}});export{aa as default};
