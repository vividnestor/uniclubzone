import{d as _,F as N,v as F,o as u,e as f,w as p,D as m,f as o,c2 as E,j as I,aw as O,n as T,b as V,c3 as B,c4 as D,c5 as U,c6 as M,bL as j,c7 as y,aQ as A,c as S,N as z,a as c,P as C,R as b,t as L,aL as G,G as Q,aJ as R,aK as k}from"./vendor-fc9552fb.js";import{d as J,t as K,f as X,a as Y}from"./index-3d1a2934.js";import{_ as q}from"./PageHeader.vue_vue_type_script_setup_true_lang-8b2a5c80.js";import{_ as H}from"./PageContent.vue_vue_type_script_setup_true_lang-f12642fa.js";import{u as W}from"./useForm-6d5d09d9.js";import{_ as P}from"./_baseIteratee-14b2df24.js";const Z=_({__name:"Accordion",props:{defaultOpen:{type:Boolean,default:!1}},setup(t){return(e,n)=>{const a=N("auto-animate");return F((u(),f(o(U),{as:"div",defaultOpen:e.defaultOpen},{default:p(({open:r})=>[m(o(E),{class:"group flex w-full items-center justify-between px-4 py-3 text-left font-medium leading-8 text-gray-900 focus:outline-none focus-visible:ring focus-visible:ring-primary-500 focus-visible:ring-opacity-75"},{default:p(()=>[I(e.$slots,"title"),m(o(O),{class:T([{"rotate-180 transform":r},"h-5 w-5 text-gray-400 group-hover:text-gray-700"])},null,8,["class"])]),_:2},1024),F(V("div",null,[m(o(B),{class:"p-4 pt-1 text-gray-700",static:""},{default:p(()=>[I(e.$slots,"content")]),_:3})],512),[[D,r]])]),_:3},8,["defaultOpen"])),[[a]])}}});var ee=P,te=M,re=j;function ne(t){return function(e,n,a){var r=Object(e);if(!te(e)){var s=ee(n);e=re(e),n=function(v){return s(r[v],v,r)}}var d=t(e,n,a);return d>-1?r[s?e[d]:d]:void 0}}var ae=ne;function se(t,e,n,a){for(var r=t.length,s=n+(a?1:-1);a?s--:++s<r;)if(e(t[s],s,t))return s;return-1}var oe=se,ie=y,x=1/0,le=17976931348623157e292;function ue(t){if(!t)return t===0?t:0;if(t=ie(t),t===x||t===-x){var e=t<0?-1:1;return e*le}return t===t?t:0}var me=ue,pe=me;function de(t){var e=pe(t),n=e%1;return e===e?n?e-n:e:0}var fe=de,ce=oe,_e=P,ve=fe,ge=Math.max,be=Math.min;function $e(t,e,n){var a=t==null?0:t.length;if(!a)return-1;var r=a-1;return n!==void 0&&(r=ve(n),r=n<0?ge(a+r,0):be(r,a-1)),ce(t,_e(e),r,!0)}var Ve=$e,he=ae,Fe=Ve,Ie=he(Fe),xe=Ie;const Te=A(xe),Ce=_({__name:"Permission",props:{modelValue:{},parentPermission:{},defaultOpen:{type:Boolean}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,a=e,r=S({get:()=>n.modelValue,set:i=>{a("update:modelValue",i)}}),s=i=>n.parentPermission?n.parentPermission+"."+i:i,d=()=>n.parentPermission?"text-sm":"text-lg",v=i=>{if(i.search("craftable-pro.role")===0&&!confirm(K("craftable-pro","Do you really want to revoke permission to manage permissions?"))){const $=Te(i.split("."));n.modelValue[$]=!n.modelValue[$],a("update:modelValue",n.modelValue)}};return(i,$)=>{const w=z("Permission",!0);return u(!0),c(b,null,C(r.value,(h,l)=>(u(),c(b,null,[typeof h!="boolean"?(u(),f(o(Z),{key:0,"default-open":i.defaultOpen},{title:p(()=>[V("span",{class:T(d())},L(i.$t("permissions",s(l))),3)]),content:p(()=>[m(w,{"default-open":!1,modelValue:r.value[l],"onUpdate:modelValue":g=>r.value[l]=g,"parent-permission":s(l)},null,8,["modelValue","onUpdate:modelValue","parent-permission"])]),_:2},1032,["default-open"])):(u(),f(o(J),{modelValue:r.value[l],"onUpdate:modelValue":g=>r.value[l]=g,key:s(l),name:s(l),label:i.$t("permissions",s(l)),value:l,checked:h,onChange:g=>v(s(l))},null,8,["modelValue","onUpdate:modelValue","name","label","value","checked","onChange"]))],64))),256)}}}),Le={class:"divide-y divide-gray-200"},Pe=_({__name:"Form",props:{form:{},submit:{},role:{}},setup(t){return(e,n)=>(u(),c("form",null,[m(o(X),null,{default:p(()=>[V("div",Le,[(u(!0),c(b,null,C(e.form.permissionsTree,(a,r)=>(u(),f(Ce,{modelValue:e.form.permissionsTree[r],"onUpdate:modelValue":s=>e.form.permissionsTree[r]=s,"parent-permission":r},null,8,["modelValue","onUpdate:modelValue","parent-permission"]))),256))])]),_:1})]))}}),we=_({__name:"Edit",props:{role:{},permissionsTree:{}},setup(t){const e=t,{form:n,submit:a}=W({permissionsTree:e.permissionsTree},route("craftable-pro.roles.update",[e.role.id]));return(r,s)=>(u(),c(b,null,[m(o(q),{sticky:"",title:`${r.$t("craftable-pro","Edit permissions for role")} ${r.role.name}`},{default:p(()=>[m(o(Y),{leftIcon:o(G),onClick:o(a),loading:o(n).processing},{default:p(()=>[Q(L(r.$t("craftable-pro","Save")),1)]),_:1},8,["leftIcon","onClick","loading"])]),_:1},8,["title"]),m(o(H),null,{default:p(()=>[m(Pe,{form:o(n),role:r.role,submit:o(a)},null,8,["form","role","submit"])]),_:1})],64))}}),Me=_({__name:"Edit",props:{role:{},permissionsTree:{}},setup(t){const e=t;return(n,a)=>(u(),f(we,R(k(e)),null,16))}});export{Me as default};
