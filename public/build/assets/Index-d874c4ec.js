import{d as R,Q as C,aj as O,an as Y,F as G,o as n,a as i,D as r,w as t,f as e,b as c,R as m,P,g as x,e as g,aN as K,G as o,t as l,a4 as I,aR as M,aS as H,C as J,aT as Q,v as L,aP as W,aU as X,aV as q,aW as Z,aO as ee,aX as ae,aJ as te,aK as re}from"./vendor-fc9552fb.js";import{u as le,l as se,w as k,h as N,a as y,_ as oe,g as ne,i as u,L as p,m as ce,n as ie,j as de,o as U}from"./index-3d1a2934.js";import{_ as fe}from"./PageHeader.vue_vue_type_script_setup_true_lang-8b2a5c80.js";import{_ as ue}from"./PageContent.vue_vue_type_script_setup_true_lang-f12642fa.js";import{_ as pe,a as D}from"./Tag.vue_vue_type_script_setup_true_lang-e877305e.js";import{u as be}from"./useListingFilters-c4c40895.js";import"./pickBy-4f81202a.js";import"./_baseIteratee-14b2df24.js";const _e={class:"flex items-center justify-end"},me={class:"mr-5"},ge=["href"],ve={class:"mr-5"},he=["href"],$e={class:"mt-4 flex flex-col gap-2"},ke={class:"flex items-center"},ye={class:"ml-4"},we={class:"font-medium text-gray-900"},Ce={class:"text-gray-500"},Pe={class:"text-sm font-normal leading-5 text-black"},xe={class:"text-sm font-normal leading-5 text-black"},Ue={class:"text-sm font-normal leading-5 text-black"},Ve={class:"text-sm font-normal leading-5 text-black"},Ie={class:"text-sm font-normal leading-5 text-black"},Le={key:0},De={key:1},Ae={key:1},Be={class:"flex justify-end"},ze={class:"py-1"},je=["onClick"],Ee={class:"flex flex-col justify-center"},Ne=R({__name:"Index",props:{craftableProUsers:{},filterOptions:{},infoUsers:{}},setup(V){var z,j,E;const{user:v}=le(),w=V,{action:A}=se(),T=a=>{A("patch",route("craftable-pro.craftable-pro-users.update",a.id),{active:!a.active})};k("craftable-pro","Active"),k("craftable-pro","Inactive"),k("craftable-pro","Pending"),k("craftable-pro","Active"),k("craftable-pro","Inactive"),be("/admin/craftable-pro-users",{role:((z=C().props.filter)==null?void 0:z.role)??null,status:((j=C().props.filter)==null?void 0:j.status)??null,two_factor_auth_enabled:((E=C().props.filter)==null?void 0:E.two_factor_auth_enabled)??null});const S=a=>{const d=w.craftableProUsers.data.length;let h=w.craftableProUsers.data[d-1],s=w.craftableProUsers.data[d-2];return h.id===a.id||s.id===a.id},B=O(),_=Y({email:"",role_id:""}),F=a=>{_.post(route("craftable-pro.craftable-pro-user.invite-user"),{onSuccess:()=>{var d;_.email="",_.role_id="",a(),B.success((d=C().props)==null?void 0:d.message)},onError:d=>{d&&Object.values(d)&&B.error(Object.values(d)[0])}})};return(a,d)=>{const h=G("can");return n(),i(m,null,[r(e(fe),{title:a.$t("Member List")},{default:t(()=>[r(e(N),{alignButtons:"right",size:"sm"},{trigger:t(({setIsOpen:s})=>[c("div",_e,[c("div",me,[(n(!0),i(m,null,P(a.infoUsers,b=>(n(),i("div",null,[b.craftable_pro_users_id==e(v).id?(n(),i("a",{key:0,style:{"background-color":"darkorange","border-radius":"20px",padding:"10px",color:"white"},href:a.route("craftable-pro.info-users.edit",b.id)}," Update Your Info ",8,ge)):x("",!0)]))),256))]),c("div",ve,[c("a",{style:{"background-color":"darkorange","border-radius":"20px",padding:"10px",color:"white"},href:a.route("craftable-pro.info-users.create",e(v).id)}," Complete Your Info ",8,he)]),(n(!0),i(m,null,P(a.craftableProUsers.data,b=>(n(),i("div",{key:b},[(n(!0),i(m,null,P(b.roles,f=>(n(),i("div",{key:f},[f.pivot.model_id===e(v).id&&(f.name==="administrator"||f.name==="club_manager")?(n(),g(e(y),{key:0,style:{"background-color":"darkorange","border-radius":"20px"},onClick:()=>s(!0),leftIcon:e(K)},{default:t(()=>[o(l(a.$t("craftable-pro","Invite user")),1)]),_:2},1032,["onClick","leftIcon"])):x("",!0)]))),128))]))),128))])]),title:t(()=>[o(l(a.$t("craftable-pro","Invite user")),1)]),content:t(()=>[c("div",$e,[r(e(oe),{modelValue:e(_).email,"onUpdate:modelValue":d[0]||(d[0]=s=>e(_).email=s),name:"email",label:a.$t("craftable-pro","Email")},null,8,["modelValue","label"]),r(e(pe),{modelValue:e(_).role_id,"onUpdate:modelValue":d[1]||(d[1]=s=>e(_).role_id=s),name:"role",label:a.$t("craftable-pro","Role"),mode:"single",options:a.filterOptions.roles,optionsValueProp:"id",optionsLabel:"name"},null,8,["modelValue","label","options"])])]),buttons:t(({setIsOpen:s})=>[r(e(y),{size:"sm",loading:e(_).processing,onClick:b=>F(s)},{default:t(()=>[o(l(a.$t("craftable-pro","Invite user")),1)]),_:2},1032,["loading","onClick"]),r(e(y),{size:"sm",color:"gray",variant:"outline",onClick:I(()=>s(),["prevent"])},{default:t(()=>[o(l(a.$t("craftable-pro","Cancel")),1)]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["title"]),r(e(ue),null,{default:t(()=>[r(e(ne),{baseUrl:a.route("craftable-pro.craftable-pro-users.index"),data:a.craftableProUsers,dataKey:"craftableProUsers",withBulkSelect:!1},{tableHead:t(()=>[r(e(u),{sortBy:"id",class:"w-1/12 text-center",style:{color:"black","font-weight":"bold"}},{default:t(()=>[o(l(a.$t("No")),1)]),_:1}),r(e(u),{sortBy:"id",class:"w-1/12 text-center",style:{color:"black","font-weight":"bold"}},{default:t(()=>[o(l(a.$t("Name")),1)]),_:1}),r(e(u),{sortBy:"first_name",class:"w-3/12 text-center",style:{color:"black","font-weight":"bold"}},{default:t(()=>[o(l(a.$t("Email")),1)]),_:1}),r(e(u),{class:"w-1/12 text-center",style:{color:"black","font-weight":"bold"}},{default:t(()=>[o(l(a.$t("Gender")),1)]),_:1}),r(e(u),{class:"w-1/12 text-center",style:{color:"black","font-weight":"bold"}},{default:t(()=>[o(l(a.$t("Role")),1)]),_:1}),r(e(u),{class:"w-1/12 text-center",style:{color:"black","font-weight":"bold"}},{default:t(()=>[o(l(a.$t("Department")),1)]),_:1}),r(e(u),{class:"w-1/12 text-center",style:{color:"black","font-weight":"bold"}},{default:t(()=>[o(l(a.$t("Year")),1)]),_:1}),r(e(u),{class:"w-2/12 text-center",style:{color:"black","font-weight":"bold"}},{default:t(()=>[o(l(a.$t("Phone")),1)]),_:1}),r(e(u),{class:"w-1/12 text-center",style:{color:"black","font-weight":"bold"}},{default:t(()=>[o(l(a.$t("craftable-pro","Status")),1)]),_:1}),r(e(u),{class:"w-1/12 text-center",style:{color:"black","font-weight":"bold"}},{default:t(()=>[o(l(a.$t("Action")),1)]),_:1})]),tableRow:t(({item:s,action:b})=>[(n(!0),i(m,null,P(a.infoUsers,f=>(n(),i(m,null,[f.craftable_pro_users_id==s.id?(n(),i(m,{key:0},[r(e(p),{class:"w-1/12 text-center",style:{color:"black"}},{default:t(()=>[o(l(s.id),1)]),_:2},1024),r(e(p),{class:"w-1/12 text-start",style:{color:"black"}},{default:t(()=>[o(l(s.first_name+" "+s.last_name),1)]),_:2},1024),r(e(p),{class:"w-3/12 text-start",style:{color:"black"}},{default:t(()=>[c("div",ke,[r(e(ce),{src:s.avatar_url,name:`${s.first_name} ${s.last_name}`},null,8,["src","name"]),c("div",ye,[c("div",we,l(s.first_name)+" "+l(s.last_name),1),c("div",Ce,l(s.email),1)])])]),_:2},1024),r(e(p),{class:"w-1/12 text-center"},{default:t(()=>[c("span",Pe,l(f.gender),1)]),_:2},1024),r(e(p),{class:"w-1/12 text-center"},{default:t(()=>[c("span",xe,l(s.roles.length>0?s.roles[0].name:""),1)]),_:2},1024),r(e(p),{class:"w-1/12 text-center"},{default:t(()=>[c("span",Ue,l(f.department),1)]),_:2},1024),r(e(p),{class:"w-1/12 text-center"},{default:t(()=>[c("span",Ve,l("Year "+f.year),1)]),_:2},1024),r(e(p),{class:"w-2/12 text-center"},{default:t(()=>[c("span",Ie,l(f.phone),1)]),_:2},1024),r(e(p),{class:"w-1/12 text-center"},{default:t(()=>[s.email_verified_at?(n(),i(m,{key:0},[s.active?(n(),i("div",Le,[r(e(D),{icon:e(M),color:"success",rounded:"",size:"sm"},{default:t(()=>[o(l(a.$t("craftable-pro","Active")),1)]),_:1},8,["icon"])])):(n(),i("div",De,[r(e(D),{icon:e(H),color:"gray",rounded:"",size:"sm"},{default:t(()=>[o(l(a.$t("craftable-pro","Inactive")),1)]),_:1},8,["icon"])]))],64)):(n(),i("div",Ae,[r(e(D),{icon:e(J),color:"warning",rounded:"",size:"sm"},{default:t(()=>[o(l(a.$t("craftable-pro","Pending")),1)]),_:1},8,["icon"])]))]),_:2},1024),r(e(p),{class:"w-1/12 text-center"},{default:t(()=>[c("div",Be,[r(e(ie),{noContentPadding:"",placement:S(s)?"bottom-end":"top-end"},{button:t(()=>[r(e(de),{icon:e(Q),variant:"outline",color:"gray",size:"sm"},null,8,["icon"])]),content:t(()=>[c("div",ze,[L((n(),g(e(U),{href:`${s.resource_url}/edit`,icon:e(W)},{default:t(()=>[o(l(a.$t("craftable-pro","Edit")),1)]),_:2},1032,["href","icon"])),[[h,"craftable-pro.craftable-pro-user.edit"]]),s.email_verified_at?(n(),g(e(U),{key:0,onClick:$=>T(s),icon:s.active?e(X):e(q)},{default:t(()=>[o(l(s.active?a.$t("craftable-pro","Deactivate"):a.$t("craftable-pro","Activate")),1)]),_:2},1032,["onClick","icon"])):(n(),g(e(U),{key:1,onClick:()=>{b("post",`craftable-pro-users/${s.id}/resend-verification-email`)},icon:e(Z)},{default:t(()=>[o(l(a.$t("craftable-pro","Resend invitation")),1)]),_:2},1032,["onClick","icon"])),c("div",null,[L((n(),g(e(N),{type:"danger"},{trigger:t(({setIsOpen:$})=>[c("div",{onClick:()=>$(!0),class:"flex cursor-pointer gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900"},[c("div",Ee,[r(e(ee),{class:"h-4 w-4"})]),o(" "+l(a.$t("craftable-pro","Delete")),1)],8,je)]),title:t(()=>[o(l(a.$t("craftable-pro","Delete user")),1)]),content:t(()=>[o(l(a.$t("craftable-pro","Are you sure you want to delete selected user? All of his data will be permanently removed from our servers forever. This action cannot be undone.")),1)]),buttons:t(({setIsOpen:$})=>[r(e(y),{onClick:I(()=>{b("delete",s.resource_url,{onFinish:()=>$(!1)})},["prevent"]),color:"danger"},{default:t(()=>[o(l(a.$t("craftable-pro","Delete")),1)]),_:2},1032,["onClick"]),r(e(y),{onClick:I(()=>$(),["prevent"]),color:"gray",variant:"outline"},{default:t(()=>[o(l(a.$t("craftable-pro","Cancel")),1)]),_:2},1032,["onClick"])]),_:2},1024)),[[h,"craftable-pro.craftable-pro-user.destroy"]])]),s.id!==a.$page.props.auth.user.id?L((n(),g(e(U),{key:2,href:a.route("craftable-pro.craftable-pro-user.impersonalLogin",{craftableProUser:s.id}),icon:e(ae)},{default:t(()=>[o(l(a.$t("craftable-pro","Log as user")),1)]),_:2},1032,["href","icon"])),[[h,"craftable-pro.craftable-pro-user.impersonal-login"]]):x("",!0)])]),_:2},1032,["placement"])])]),_:2},1024)],64)):x("",!0)],64))),256))]),_:1},8,["baseUrl","data"])]),_:1})],64)}}}),Me=R({__name:"Index",props:{craftableProUsers:{},roles:{},filterOptions:{},infoUsers:{}},setup(V){const v=V;return(w,A)=>(n(),g(Ne,te(re(v)),null,16))}});export{Me as default};
